(function(t){function e(e){for(var i,r,l=e[0],o=e[1],c=e[2],d=0,m=[];d<l.length;d++)r=l[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&m.push(n[r][0]),n[r]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);u&&u(e);while(m.length)m.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],i=!0,l=1;l<a.length;l++){var o=a[l];0!==n[o]&&(i=!1)}i&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var i={},n={app:0},s=[];function r(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=o;s.push([0,"data","chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var i=a("64a9"),n=a.n(i);n.a},"190a":function(t,e,a){"use strict";var i=a("425c"),n=a.n(i);n.a},"1d8e":function(t,e,a){"use strict";var i=a("601f"),n=a.n(i);n.a},"236b":function(t,e,a){"use strict";var i=a("3912"),n=a.n(i);n.a},"2fea":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mdui-textfield mdui-p-y-0"},[a("label",{staticClass:"mdui-textfield-label no-sl"},[t._t("default")],2),a("input",{staticClass:"mdui-textfield-input mdui-p-y-0",attrs:{type:"number",min:"0",step:"1",placeholder:t.placeholder},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}})])},n=[],s=(a("c5f6"),{name:"mdui-number-input",model:{prop:"value",event:"input"},props:{value:[Number,String],placeholder:String}}),r=s,l=(a("6a1a"),a("2877")),o=Object(l["a"])(r,i,n,!1,null,"55da2297",null);e["default"]=o.exports},3912:function(t,e,a){},"3b81":function(t,e,a){},"425c":function(t,e,a){},"46aa":function(t,e,a){},"4a30":function(t,e,a){"use strict";var i=a("7612"),n=a.n(i);n.a},"4c50":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("7f7f"),a("a481"),a("ac6a"),a("cadf"),a("551c"),a("f751"),a("097d");var i=a("8bbf"),n=a.n(i),s=a("c579"),r=a.n(s),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:(t.$root.smallScreen?"mobile-screen mdui-p-t-2":"mdui-p-t-4")+" mdui-p-b-5",attrs:{id:"app"}},[i("div",{staticClass:"mdui-appbar mdui-appbar-fixed mdui-color-grey-900"},[i("div",{staticClass:"mdui-tab mdui-color-theme",attrs:{id:"app-tab"}},[i("router-link",{staticClass:"mdui-ripple mdui-ripple-white router-root",attrs:{to:"/"}},[i("span",{staticClass:"mdui-hidden-xs"},[t._v("明日方舟工具箱")]),i("i",{staticClass:"mdui-hidden-sm-up mdui-icon material-icons"},[t._v("home")])]),i("router-link",{staticClass:"mdui-ripple mdui-ripple-white",attrs:{to:"/hr"}},[i("span",[t._v("公开招募"),i("span",{staticClass:"mdui-hidden-xs"},[t._v("计算")])])]),i("router-link",{staticClass:"mdui-ripple mdui-ripple-white",attrs:{to:"/material"}},[i("span",[t._v("精英材料"),i("span",{staticClass:"mdui-hidden-xs"},[t._v("计算")])])]),i("router-link",{staticClass:"mdui-ripple mdui-ripple-white",attrs:{to:"/level"}},[i("span",[t._v("干员升级"),i("span",{staticClass:"mdui-hidden-xs"},[t._v("计算")])])]),i("router-link",{staticClass:"mdui-ripple mdui-ripple-white",attrs:{to:"/base"}},[i("span",[t._v("基建技能"),i("span",{staticClass:"mdui-hidden-xs"},[t._v("一览")])])])],1)]),i("div",{staticClass:"mdui-container",attrs:{id:"main-container"}},[i("transition",{attrs:{name:"fade",mode:"out-in"},on:{leave:function(e){t.$root.nm=!1},enter:t.$root.mutation}},[i("router-view")],1)],1),t.$root.nm?i("img",{staticClass:"bg-img",attrs:{src:a("6138")}}):i("img",{staticClass:"bg-img",attrs:{src:a("bd6f")}})])},o=[],c={name:"app",mounted:function(){var t=this.$root.Mdui.JQ,e=this.$root.Mdui.Tab;new e("#app-tab"),window.addEventListener("popstate",(function(){t("#app-tab .mdui-tab-indicator").remove(),new e("#app-tab").handleUpdate()}))}},u=c,d=(a("034f"),a("2877")),m=Object(d["a"])(u,l,o,!1,null,null,null),p=m.exports,h=a("6389"),v=a.n(h),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mdui-row mdui-typo mdui-center",staticStyle:{"max-width":"1012px"}},[a("div",{staticClass:"mdui-col-xs-12"},[a("h1",{staticClass:"mdui-m-t-0"},[t._v("明日方舟工具箱")]),t._m(0),a("p",[t._v("宗旨是简洁美观且对移动设备友好，以及 Material Design 天下第一（。）")]),t._m(1),a("h2",[t._v("添加到主屏幕")]),a("p",[t._v("可将本工具箱添加到主屏幕作为 APP 在离线环境下使用")]),a("p",[t._v("若您是首次打开，可能需要等待所有资源缓存完毕后才能添加")]),a("div",{staticClass:"mdui-panel mdui-panel-gapless",attrs:{"mdui-panel":""}},[a("div",{staticClass:"mdui-panel-item"},[t._m(2),a("div",{staticClass:"mdui-panel-item-body"},[a("h4",{staticClass:"mdui-m-t-1 h-ul"},[t._v("Chrome")]),a("button",{staticClass:"mdui-btn mdui-btn-raised mdui-ripple mdui-color-pink-accent mdui-m-b-2",attrs:{disabled:!1===t.$root.deferredPrompt},on:{click:t.$root.installPWA}},[t._v("添加到主屏幕")]),a("p",[t._v("请尝试点击（如果可点击的话）")]),a("h4",{staticClass:"h-ul"},[t._v("Windows - Chrome")]),t._m(3),a("h4",{staticClass:"h-ul"},[t._v("Android - Chrome")]),t._m(4),a("h4",{staticClass:"h-ul"},[t._v("iOS ≥ 11.3")]),t._m(5)])])]),a("h2",[t._v("主要功能")]),t._m(6),a("h2",[t._v("数据来源及鸣谢")]),t._m(7),a("h2",[t._v("其他")]),a("p",[a("mdui-switch",{model:{value:t.setting.rememberLastPage,callback:function(e){t.$set(t.setting,"rememberLastPage",e)},expression:"setting.rememberLastPage"}},[t._v("记住最后一次打开的页面")])],1),a("p",[a("button",{staticClass:"mdui-btn mdui-btn-raised mdui-ripple mdui-color-pink-accent mdui-m-r-2",attrs:{"mdui-tooltip":"{content:'清除本地保存的设置及输入信息',position:'top'}"},on:{click:t.clear}},[t._v("清除本地数据")]),t._v("已用："+t._s(t.lsSize)+"\n        ")]),a("h2",[t._v("更新日志")]),a("changelog")],1)])},g=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("Github: "),a("a",{attrs:{href:"https://github.com/Tsuk1ko/arknights-toolbox",target:"_blank"}},[t._v("Tsuk1ko/arknights-toolbox")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("如果有好的想法、建议、希望增加的功能，或者发现了 BUG，欢迎到项目中提 "),a("a",{attrs:{href:"https://github.com/Tsuk1ko/arknights-toolbox/issues",target:"_blank"}},[t._v("issue")]),t._v(" 或提交 pr")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mdui-panel-item-header"},[a("div",{staticClass:"mdui-panel-item-title",staticStyle:{width:"auto"}},[t._v("各平台添加方法")]),a("i",{staticClass:"mdui-panel-item-arrow mdui-icon material-icons"},[t._v("keyboard_arrow_down")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("点击浏览器右上方的"),a("i",{staticClass:"mdui-icon material-icons"},[t._v("more_vert")]),t._v("按钮，选择"),a("code",[t._v("安装“明日方舟工具箱 - by 神代綺凜”")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("点击浏览器右上方的"),a("i",{staticClass:"mdui-icon material-icons"},[t._v("more_vert")]),t._v("按钮，选择"),a("code",[t._v("添加到主屏幕")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("使用 Safari 浏览器打开本工具箱页面，点击浏览器底部的分享按钮"),a("i",{staticClass:"mdui-icon material-icons"},[t._v("crop_5_4")]),a("i",{staticClass:"mdui-icon material-icons",staticStyle:{"margin-left":"-24px","margin-top":"-20px"}},[t._v("arrow_upward")]),t._v("，选择"),a("code",[t._v("添加到主屏幕")]),t._v("，接着点击右上角的“添加”即可")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[t._v("公开招募计算")]),a("li",[t._v("精英材料计算 + 导入干员材料预设 + 素材获取最优策略规划")]),a("li",[t._v("干员升级计算")]),a("li",[t._v("基建技能一览")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("a",{attrs:{href:"http://wiki.joyme.com/arknights",target:"_blank"}},[t._v("明日方舟 Wiki")]),t._v("（干员数据及图片）")]),a("li",[a("a",{attrs:{href:"https://github.com/graueneko/graueneko.github.io",target:"_blank"}},[t._v("一只灰猫")]),t._v("（材料合成、干员升级数据）")]),a("li",[a("a",{attrs:{href:"https://github.com/Houdou/arkgraph",target:"_blank"}},[t._v("ark-nights.com")]),t._v("（材料图片）")]),a("li",[a("a",{attrs:{href:"https://penguin-stats.io/",target:"_blank"}},[t._v("企鹅物流数据统计")]),t._v("（掉落数据）")]),a("li",[a("a",{attrs:{href:"https://bbs.nga.cn/read.php?tid=17507710",target:"_blank"}},[t._v("素材获取最优策略规划")]),t._v("（思路）")])])}],b=(a("8615"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"changelog"}},[a("p",[t._v("干员数据最后更新日期："),a("code",[t._v(t._s(t.time))])]),t._l(t.changelogs,(function(e){return a("div",{key:e.time},[a("h4",[t._v(t._s(e.time))]),a("ul",t._l(e.changes,(function(e,i){return a("li",{key:i},[t._v(t._s(e))])})),0)])}))],2)}),_=[],k=a("44fe"),y=a("7a3b"),C={name:"changelog",data:function(){return{time:k["a"],changelogs:y}}},x=C,w=Object(d["a"])(x,b,_,!1,null,null,null),S=w.exports,$=a("60bb"),P=a.n($),E=a("8fc5"),O={name:"home",components:{Changelog:S},data:function(){return{lsSize:this.calcLsSize(),setting:{rememberLastPage:!0}}},methods:{clear:function(){localStorage.clear(),this.$root.snackbar("清除成功"),this.lsSize=this.calcLsSize()},calcLsSize:function(){return this.$root.calcSize(2*P.a.sumBy(Object.values(localStorage),E["a"]))}},watch:{setting:{handler:function(t){localStorage.setItem("home.setting",JSON.stringify(t))},deep:!0}},created:function(){var t=localStorage.getItem("home.setting");t?this.setting=JSON.parse(t):localStorage.setItem("home.setting",JSON.stringify(this.setting))}},D=O,T=Object(d["a"])(D,f,g,!1,null,null,null),I=T.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"arkn-hr"}},[a("div",{staticClass:"mdui-row"},[a("div",{staticClass:"mdui-col-xs-12"},[a("div",{class:!!t.$root.smallScreen&&"mdui-drawer mdui-drawer-right mdui-drawer-close",attrs:{id:"drawer"}},[a("table",{staticClass:"mdui-table tag-table"},[a("tbody",[a("tr",[t.$root.smallScreen?t._e():a("td",{attrs:{width:"1"}},[a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v("星级")])]),a("td",[a("button",{class:"mdui-btn mdui-btn-dense mdui-ripple tag-btn "+(t.allStar?t.color.selected:t.color.notSelected),on:{click:function(e){t.selected.star=t.l.fill(Array(t.selected.star.length),!t.allStar)}}},[t._v("全选")]),t._l(6,(function(e){return a("tag-button",{directives:[{name:"show",rawName:"v-show",value:!(6-e<2&&t.setting.hide12),expression:"!(6 - i < 2 && setting.hide12)"}],key:"star-"+(7-e),attrs:{notSelectedColor:t.color.notSelected,selectedColor:t.color[7-e]},model:{value:t.selected.star[6-e],callback:function(a){t.$set(t.selected.star,6-e,a)},expression:"selected.star[6 - i]"}},[t._v(t._s(7-e)+"★")])}))],2)]),t._l(t.tagList.sort,(function(e){return a("tr",{key:e.en},[t.$root.smallScreen?t._e():a("td",{attrs:{width:"1"}},[a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v(t._s(e.zh))])]),a("td",t._l(t.tagList[e.en],(function(i){return a("tag-button",{key:e.en+"-"+i,attrs:{notSelectedColor:t.color.notSelected,selectedColor:t.color.selected},model:{value:t.selected.tag[i],callback:function(e){t.$set(t.selected.tag,i,e)},expression:"selected.tag[tag]"}},[t._v(t._s(i))])})),1)])})),a("tr",[t.$root.smallScreen?t._e():a("td",{attrs:{width:"1"}},[a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v("设置")])]),a("td",t._l(t.settingZh,(function(e,i){return a("mdui-switch",{key:i,model:{value:t.setting[i],callback:function(e){t.$set(t.setting,i,e)},expression:"setting[en]"}},[t._v(t._s(e))])})),1)]),a("tr",[t.$root.smallScreen?t._e():a("td",{attrs:{width:"1"}},[a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v("操作")])]),a("td",[a("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-red tag-btn",on:{click:t.reset}},[t._v("重置")]),a("label",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-purple tag-btn",attrs:{for:"image-select","mdui-tooltip":"{content:'PC上可直接将图片拖至此处',position:'top'}"},on:{dragover:function(t){t.preventDefault()},drop:function(e){return e.preventDefault(),function(e){return t.tagImg=e.dataTransfer.files[0]}(e)}}},[t._v("识别词条截图")]),a("input",{ref:"image",staticStyle:{display:"none"},attrs:{type:"file",id:"image-select",accept:"image/*"},on:{change:function(e){t.tagImg=t.$refs.image.files[0]}}})])])],2)])])])]),t.selected.tag["高级资深干员"]||t.selected.tag["资深干员"]?a("div",{staticClass:"mdui-chip mdui-m-t-4"},[t._m(0),a("span",{staticClass:"mdui-chip-title mdui-text-truncate",style:t.$root.screenWidth<360&&"font-size:12px"},[t._v("请拉满 9 个小时以保证词条不被划掉")])]):t._e(),a("div",{class:"mdui-row "+(t.$root.smallScreen?"":"mdui-m-t-4")},[a("div",{staticClass:"mdui-col-xs-12"},[t.$root.smallScreen?a("div",{staticClass:"comb-small"},[a("table",{staticClass:"mdui-table comb-table mdui-shadow-0 no-border"},[t._m(2),a("tbody",[t._l(t.combinations,(function(e,i){return[a("tr",{key:"comb-"+i+"-tr1"},[a("td",{staticClass:"mdui-p-b-0 no-border",attrs:{colspan:"2"}},t._l(e.tags,(function(e){return a("button",{key:"comb-"+i+"-"+e,class:"mdui-btn mdui-btn-dense no-pe tag-btn "+t.color.selected},[t._v(t._s(e))])})),0)]),a("tr",{key:"comb-"+i+"-tr2"},[a("td",{attrs:{colspan:"2"}},t._l(e.chars,(function(e){return a("button",{key:"comb-"+i+"-"+e,class:"mdui-btn mdui-btn-dense tag-btn "+t.color[t.hr[e].star],attrs:{"has-avatar":t.setting.showAvatar},on:{click:function(a){return t.showDetail(e)}}},[t.hr[e].pub?t._e():a("div",{staticClass:"tag-triangle"}),t.setting.showAvatar?a("img",{staticClass:"tag-avatar no-pe",attrs:{src:t.$root.avatar(t.addition[t.hr[e].name])}}):t._e(),t._v("\n                                        "+t._s(t.hr[e].name)+"\n                                    ")])})),0)])]})),0==t.combinations.length?a("tr",[a("td",{staticClass:"no-border",attrs:{colspan:"2"}},[t._v("请点击右下角的按钮选择词条")])]):t._e()],2)])]):a("div",{staticClass:"comb-large"},[a("table",{staticClass:"mdui-table mdui-table-hoverable comb-table"},[t._m(1),a("tbody",t._l(t.combinations,(function(e,i){return a("tr",{key:"comb-"+i},[a("td",[t._v(t._s(i+1))]),a("td",t._l(e.tags,(function(e){return a("button",{key:"comb-"+i+"-"+e,class:"mdui-btn mdui-btn-dense no-pe tag-btn "+t.color.selected},[t._v(t._s(e))])})),0),a("td",[a("button",{class:"mdui-btn mdui-btn-dense no-pe tag-btn "+t.color[e.min]},[t._v(t._s(e.min)+"★")])]),a("td",t._l(e.chars,(function(e){return a("button",{key:"comb-"+i+"-"+e,class:"mdui-btn mdui-btn-dense tag-btn "+t.color[t.hr[e].star],attrs:{"has-avatar":t.setting.showAvatar},on:{click:function(a){return t.showDetail(e)}}},[t.hr[e].pub?t._e():a("div",{staticClass:"tag-triangle"}),t.setting.showAvatar?a("img",{staticClass:"tag-avatar no-pe",attrs:{src:t.$root.avatar(t.addition[t.hr[e].name])}}):t._e(),t._v("\n                                    "+t._s(t.hr[e].name)+"\n                                ")])})),0)])})),0)])])])]),a("div",{staticClass:"mdui-dialog mdui-card",attrs:{id:"detail"}},[a("div",{staticClass:"mdui-card-header mdui-p-b-0"},[a("img",{key:"di-"+t.detail.name,staticClass:"mdui-card-header-avatar no-pe",attrs:{src:!!t.addition[t.detail.name]&&t.$root.avatar(t.addition[t.detail.name])}}),a("div",{staticClass:"mdui-card-header-title"},[a("span",[t._v(t._s(t.detail.name))]),a("button",{class:"mdui-btn mdui-btn-dense no-pe tag-btn mdui-m-l-1 mdui-m-y-0 "+t.color.selected},[t._v(t._s(t.detail.job))]),a("button",{class:"mdui-btn mdui-btn-dense no-pe tag-btn mdui-m-y-0 "+t.color[t.detail.star]},[t._v(t._s(t.detail.star)+"★")])]),a("div",{staticClass:"mdui-card-header-subtitle"},[t._v(t._s(t.detail.memo))]),a("div",{staticClass:"detail-tags"},t._l(t.detail.tags,(function(e){return a("button",{key:"detail-"+e,class:"mdui-btn mdui-btn-dense no-pe tag-btn "+(t.selected.tag[e]?t.color.selected:t.color.notSelected)},[t._v(t._s(e))])})),0)]),a("div",{staticClass:"mdui-dialog-actions"},[a("a",{staticClass:"mdui-btn mdui-ripple mdui-color-teal",attrs:{href:"http://wiki.joyme.com/arknights/"+t.detail.name,target:"_blank"}},[t._v("在 Wiki 查看")]),a("button",{staticClass:"mdui-btn mdui-ripple mdui-color-pink",attrs:{"mdui-dialog-close":""}},[t._v("关闭")])])]),t.$root.smallScreen?a("button",{staticClass:"mdui-fab mdui-fab-fixed mdui-fab-mini mdui-color-pink-accent mdui-ripple",on:{click:function(e){!t.drawer&&(t.drawer=new t.$root.Mdui.Drawer("#drawer")),t.drawer.toggle()}}},[a("i",{staticClass:"mdui-icon material-icons"},[t._v("sort")])]):t._e()])},j=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mdui-chip-icon mdui-color-red"},[a("i",{staticClass:"mdui-icon material-icons"},[t._v("priority_high")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"mdui-table-col-numeric",attrs:{width:"1"}},[t._v("#")]),a("th",{attrs:{width:"20%"}},[t._v("词条")]),a("th",{staticClass:"mdui-text-center",attrs:{width:"1"}},[t._v("可保底")]),a("th",{attrs:{width:"80%"}},[t._v("可能出现（点击干员查看详细信息）")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("词条")]),a("th",[t._v("可能出现（点击干员查看详情）")])])])}],M=(a("1c4c"),a("28a5"),a("96cf"),a("3b8d")),A=(a("ac4d"),a("8a81"),a("55dd"),a("6762"),a("2fdb"),a("5df3"),a("4f7f"),a("6c7b"),a("3b4e"),r.a.JQ.ajax),L={get:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(a,i){A({method:"GET",url:t,dataType:e?"json":"text",success:function(t){return a(t)},error:function(t){return i(t)}})}))},smms:function(t){var e=new FormData;return e.append("smfile",t),new Promise((function(t,a){A({method:"POST",url:"https://sm.ms/api/upload",processData:!1,data:e,dataType:"json",contentType:!1,success:function(e){return t(e)},error:function(t){return a(t)}})}))},corsGet:function(t){return new Promise((function(e,a){A({method:"GET",url:"https://json2jsonp.com/?url=".concat(encodeURIComponent(t)),dataType:"jsonp",jsonp:"callback",xhrFields:{withCredentials:!0},success:function(t){return e(t)},error:function(t){return a(t)}})}))}},F=a("63c9"),z=a("8ea0"),J={name:"arkn-hr",data:function(){return{l:P.a,showAll:!1,hr:P.a.cloneDeep(z),addition:P.a.cloneDeep(F),tags:{"资深干员":[],"高级资深干员":[]},pubs:[],selected:{star:P.a.fill(Array(6),!0),tag:{}},setting:{showAvatar:!1,hide12:!1,hideSingleFemale:!1,showPrivate:!1},settingZh:{showAvatar:"显示头像",hide12:"隐藏1★2★",hideSingleFemale:"隐藏单独的“女性干员”词条",showPrivate:"显示非公开招募干员"},avgCharTag:0,tagList:{sex:["男性干员","女性干员"],location:["近战位","远程位"],credentials:["新手","资深干员","高级资深干员"],job:["先锋干员","狙击干员","医疗干员","术师干员","近卫干员","重装干员","辅助干员","特种干员"],features:new Set,sort:[{zh:"资质",en:"credentials"},{zh:"位置",en:"location"},{zh:"性别",en:"sex"},{zh:"职业",en:"job"},{zh:"特性",en:"features"}]},color:{notSelected:"mdui-color-brown-300",selected:"mdui-color-grey-800",6:"mdui-color-red-700",5:"mdui-color-orange-900",4:"mdui-color-cyan-700",3:"mdui-color-green-700",2:"mdui-color-brown-700",1:"mdui-color-grey-700"},detail:0,drawer:!1,tagImg:!1,tagsCache:[]}},watch:{"selected.tag":{handler:function(){var t=P.a.flatMap(this.selected.tag,(function(t,e){return t?[e]:[]}));if(t.length>6){for(var e in new this.$root.Mdui.alert("最多只能同时选择 6 个词条噢！",null,null,{confirmText:"好吧",history:!1}),this.selected.tag)this.selected.tag[e]=this.tagsCache.includes(e);t=this.tagsCache}else this.tagsCache=t},deep:!0},setting:{handler:function(t){localStorage.setItem("hr.setting",JSON.stringify(t))},deep:!0},tagImg:function(t){this.ocr(t)}},computed:{allStar:function(){return P.a.sum(this.selected.star)==this.selected.star.length},combinations:function(){var t=this,e=P.a.flatMap(this.selected.tag,(function(t,e){return t?[e]:[]})),a=P.a.flatMap(this.selected.star,(function(t,e){return t?[e+1]:[]})),i=P.a.flatMap([1,2,3],(function(t){return P.a.combinations(e,t)})),n=[],s=!0,r=!1,l=void 0;try{for(var o,c=i[Symbol.iterator]();!(s=(o=c.next()).done);s=!0){var u=o.value;if(!this.setting.hideSingleFemale||1!=u.length||"女性干员"!=u[0]){var d=[],m=!0,p=!1,h=void 0;try{for(var v,f=u[Symbol.iterator]();!(m=(v=f.next()).done);m=!0){var g=v.value;d.push(this.tags[g])}}catch(C){p=!0,h=C}finally{try{m||null==f.return||f.return()}finally{if(p)throw h}}this.setting.showPrivate||d.push(this.pubs);var b=P.a.intersection.apply(P.a,d);if(u.includes("高级资深干员")||P.a.remove(b,(function(e){return 6==t.hr[e].star})),0!=b.length){var _=P.a.filter(b,(function(e){return t.hr[e].star>=3}));0==_.length&&(_=b);var k=P.a.sumBy(_,(function(e){return t.hr[e].star}))/_.length-u.length/10-_.length/this.avgCharTag,y=P.a.minBy(_,(function(e){return t.hr[e].pub?t.hr[e].star:1/0}));P.a.remove(b,(function(e){return!a.includes(t.hr[e].star)})),this.setting.hide12&&P.a.remove(b,(function(e){return t.hr[e].star<3})),0!=b.length&&n.push({tags:u,chars:b,min:this.hr[y].star,score:k})}}}}catch(C){r=!0,l=C}finally{try{s||null==c.return||c.return()}finally{if(r)throw l}}return this.$root.nm=n.some((function(t){var e=t.min;return e>=5})),n.sort((function(t,e){return t.min==e.min?e.score-t.score:e.min-t.min})),n}},methods:{reset:function(){for(var t in this.selected.star=P.a.fill(Array(this.selected.star.length),!0),this.selected.tag)this.selected.tag[t]=!1},showDetail:function(t){var e=this;this.detail=this.hr[t],this.$nextTick((function(){return new e.$root.Mdui.Dialog("#detail",{history:!1}).open()}))},ocr:function(){var t=Object(M["a"])(regeneratorRuntime.mark((function t(e,a){var i,n,s,r,l,o,c,u,d,m,p,h,v=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=this.$root.snackbar,n=i({message:"识别词条中，请耐心等待",timeout:0}),t.t0=a,t.t0){t.next=7;break}return t.next=6,L.smms(e).catch((function(t){return console.error(t),{code:"error",msg:t}}));case 6:t.t0=t.sent;case 7:if(s=t.t0,"error"!=s.code){t.next=12;break}return n.close(),i({message:"错误：".concat(s.msg),timeout:0,buttonText:"重试",onButtonClick:function(){return v.ocr(e)}}),t.abrupt("return");case 12:return t.next=14,L.corsGet("https://api.ocr.space/parse/imageurl?apikey=helloworld&language=chs&scale=true&url=".concat(s.data.url)).catch((function(t){return console.error(t),{IsErroredOnProcessing:!0,ErrorMessage:t}}));case 14:if(r=t.sent,!r.IsErroredOnProcessing){t.next=19;break}return n.close(),i({message:"错误：".concat(r.ErrorMessage),timeout:0,buttonText:"重试",onButtonClick:function(){return v.ocr(e,s)}}),t.abrupt("return");case 19:L.get(s.data.delete),this.reset(),l=r.ParsedResults[0].ParsedText.split("\r\n"),console.log("识别结果：",l),o=0,c=!0,u=!1,d=void 0,t.prev=27,m=l[Symbol.iterator]();case 29:if(c=(p=m.next()).done){t.next=41;break}if(h=p.value,!(h in this.selected.tag)){t.next=38;break}if(o++,!(o>6)){t.next=37;break}return n.close(),i({message:"识别词条超出6个，仅取前6个"}),t.abrupt("return");case 37:this.selected.tag[h]=!0;case 38:c=!0,t.next=29;break;case 41:t.next=47;break;case 43:t.prev=43,t.t1=t["catch"](27),u=!0,d=t.t1;case 47:t.prev=47,t.prev=48,c||null==m.return||m.return();case 50:if(t.prev=50,!u){t.next=53;break}throw d;case 53:return t.finish(50);case 54:return t.finish(47);case 55:n.close();case 56:case"end":return t.stop()}}),t,this,[[27,43,47,55],[48,,50,54]])})));function e(e,a){return t.apply(this,arguments)}return e}()},created:function(){var t=this;this.hr.sort((function(t,e){return e.star-t.star}));var e=0,a=this.tagList.location.concat(this.tagList.credentials,this.tagList.job,this.tagList.sex);this.hr.forEach((function(i,n){var s=i.pub,r=i.sex,l=i.tags,o=i.job,c=i.star;s&&t.pubs.push(n);var u=!0,d=!1,m=void 0;try{for(var p,h=l[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var v=p.value;a.includes(v)||t.tagList.features.add(v)}}catch(C){d=!0,m=C}finally{try{u||null==h.return||h.return()}finally{if(d)throw m}}switch(c){case 5:t.tags["资深干员"].push(n);break;case 6:t.tags["高级资深干员"].push(n);break}r&&r.length>0&&l.push("".concat(r,"性干员")),o&&o.length>0&&l.push("".concat(o,"干员"));var f=!0,g=!1,b=void 0;try{for(var _,k=l[Symbol.iterator]();!(f=(_=k.next()).done);f=!0){var y=_.value;t.tags[y]||(t.tags[y]=[]),t.tags[y].push(n)}}catch(C){g=!0,b=C}finally{try{f||null==k.return||k.return()}finally{if(g)throw b}}e+=l.length}));var i=P.a.size(this.tags);for(var n in this.avgCharTag=e/i,this.tagList.features=Array.from(this.tagList.features).sort((function(t,e){return t.length==e.length?t.localeCompare(e):t.length-e.length})),this.tags)this.$set(this.selected.tag,n,!1);var s=localStorage.getItem("hr.setting");s&&(this.setting=JSON.parse(s))}},B=J,V=(a("77a5"),Object(d["a"])(B,N,j,!1,null,null,null)),R=V.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"arkn-material"}},[a("div",{staticClass:"mdui-row"},[a("div",{staticClass:"mdui-col-lg-6"},[a("table",{staticClass:"mdui-table tag-table"},[a("tbody",[a("tr",[t.$root.smallScreen?t._e():a("td",{attrs:{width:"1"}},[a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v("稀有")])]),a("td",[t.$root.smallScreen?a("label",{staticClass:"mdui-textfield-label"},[t._v("稀有度")]):t._e(),a("button",{class:"mdui-btn mdui-btn-dense mdui-ripple tag-btn "+(t.allRare?t.color.selected:t.color.notSelected),on:{click:function(e){t.selected.rare=t.l.fill(Array(t.selected.rare.length),!t.allRare)}}},[t._v("全选")]),t._l(5,(function(e){return a("tag-button",{key:"rare-"+(t.rareNum+1-e),attrs:{notSelectedColor:t.color.notSelected,selectedColor:t.color[t.rareNum+1-e]},model:{value:t.selected.rare[t.rareNum-e],callback:function(a){t.$set(t.selected.rare,t.rareNum-e,a)},expression:"selected.rare[rareNum - i]"}},[t._v(" "+t._s(t.rareNum+1-e)+" ")])})),a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-red tag-btn",on:{click:function(e){t.selected.rare=t.l.concat([!1],t.l.fill(Array(t.rareNum-1),!0))}}},[t._v("重置")])],2)]),a("tr",[t.$root.smallScreen?t._e():a("td",{attrs:{width:"1"}},[a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v("预设")])]),a("td",[t.$root.smallScreen?a("label",{staticClass:"mdui-textfield-label"},[t._v("预设")]):t._e(),a("vue-tags-input",{ref:"presetInput",class:"tags-input"+(0===t.preset.length?" empty":""),attrs:{id:"preset",tags:t.selected.presets,"allow-edit-tags":!1,"add-from-paste":!1,"add-on-blur":!1,"autocomplete-items":t.presetItems,"add-only-from-autocomplete":!0,"autocomplete-always-open":!0,placeholder:"输入干员中英文名/拼音/拼音首字母",autocomplete:"off"},on:{"tags-changed":t.usePreset,"before-adding-tag":function(e){return t.showPreset(e)}},scopedSlots:t._u([{key:"autocomplete-item",fn:function(e){return a("div",{staticClass:"mdui-list-item mdui-p-y-0 mdui-p-x-1",on:{click:function(t){return e.performAdd(e.item)}}},[a("div",{staticClass:"mdui-list-item-avatar"},[a("img",{key:"head-"+e.item.text,staticClass:"no-pe",attrs:{src:t.$root.avatar(t.addition[e.item.text])}})]),a("div",{staticClass:"mdui-list-item-content mdui-p-y-0 mdui-m-l-1"},[t._v(t._s(e.item.text))])])}},{key:"tag-center",fn:function(e){return a("span",{staticClass:"no-sl",on:{click:function(a){return t.showPreset(e,!0)}}},[t._v(t._s(e.tag.text))])}}]),model:{value:t.preset,callback:function(e){t.preset=e},expression:"preset"}})],1)]),a("tr",[t.$root.smallScreen?t._e():a("td",{attrs:{width:"1"}},[a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v("选项")])]),a("td",t._l(t.settingZh,(function(e,i){return a("mdui-switch",{key:i,attrs:{html:e},model:{value:t.setting[i],callback:function(e){t.$set(t.setting,i,e)},expression:"setting[en]"}})})),1)]),a("tr",[t.$root.smallScreen?t._e():a("td",{attrs:{width:"1"}},[a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v("操作")])]),a("td",[a("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-red tag-btn",on:{click:function(e){return t.reset()}}},[t._v("重置需求&已有")]),a("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-red tag-btn",on:{click:function(e){return t.reset("need")}}},[t._v("重置需求")]),a("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-red tag-btn",on:{click:function(e){return t.reset("have")}}},[t._v("重置已有")]),a("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-green-600 tag-btn",on:{click:t.saveData}},[a("i",{staticClass:"mdui-icon material-icons"},[t._v("file_upload")]),t._v("备份")]),a("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-blue-600 tag-btn",on:{click:t.restoreData}},[a("i",{staticClass:"mdui-icon material-icons"},[t._v("file_download")]),t._v("恢复")]),a("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-pink tag-btn",on:{click:t.resetPenguinData}},[t._v("强制更新掉落数据")])])]),a("tr",[t.$root.smallScreen?t._e():a("td",{attrs:{width:"1"}},[a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v("计算")])]),a("td",[a("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-purple tag-btn",attrs:{id:"ark-planner-btn",disabled:t.apbDisabled},on:{click:function(e){t.apbDisabled=!0,t.initPlanner().then((function(){t.showPlan(),t.apbDisabled=!1}))}}},[t._v("\n                                我该刷什么图\n                            ")]),a("mdui-switch",{staticClass:"mdui-m-l-2",attrs:{html:"包括活动关卡"},model:{value:t.setting.planIncludeEvent,callback:function(e){t.$set(t.setting,"planIncludeEvent",e)},expression:"setting.planIncludeEvent"}}),a("mdui-switch",{attrs:{html:"需求狗粮"},model:{value:t.setting.planCardExpFirst,callback:function(e){t.$set(t.setting,"planCardExpFirst",e)},expression:"setting.planCardExpFirst"}})],1)])])])]),a("div",{staticClass:"mdui-col-lg-6"},[a("material-readme",{staticClass:"mdui-hidden-md-down"}),a("div",{staticClass:"mdui-panel mdui-panel-gapless mdui-hidden-lg-up mdui-m-t-2",attrs:{"mdui-panel":""}},[a("div",{staticClass:"mdui-panel-item"},[t._m(0),a("div",{staticClass:"mdui-panel-item-body mdui-p-l-0"},[a("material-readme")],1)])])],1)]),a("div",{staticClass:"mdui-row"},[t.setting.simpleMode?a("div",{staticClass:"mdui-col-xs-12 mdui-m-t-4",attrs:{id:"material-simple"}},[a("div",{staticClass:"material-group-wrap"},t._l(t.materialsOrder,(function(e){return a("div",{directives:[{name:"show",rawName:"v-show",value:t.showMaterialsFlatten.includes(e),expression:"showMaterialsFlatten.includes(materialName)"}],key:e+"-simple",class:t.$root.smallScreen?"mdui-col-xs-6 material-simple-wrap":"inline-block"},[a("div",{class:"mdui-card "+(t.$root.smallScreen?"mdui-center":"mdui-m-r-2")+" mdui-m-b-2 material material-simple"+(t.setting.translucentDisplay&&t.hasInput&&0==t.gaps[e][0]?" opacity-5":"")},[a("div",{class:"card-triangle-small "+t.color[t.materialsTable[e].rare]}),a("div",{staticClass:"mdui-card-header",attrs:{name:e}},[a("div",{class:"mdui-card-header-avatar mdui-valign no-sl "+(t.l.size(t.materialsTable[e].source)>0?"pointer":""),attrs:{t:t.materialsTable[e].rare},on:{click:function(a){t.l.size(t.materialsTable[e].source)>0&&t.showDropDetail(t.materialsTable[e])}}},[a("img",{staticClass:"no-pe",attrs:{src:"/assets/img/material/"+t.materialsTable[e].img}}),a("div",{class:"material-simple-name"+(t.inputs[e].need>0?" mdui-text-color-pink-accent":"")},[t._v(t._s(e))])]),a("div",[a("mdui-number-input",{staticClass:"block mdui-m-b-1",attrs:{placeholder:"需求"},model:{value:t.inputs[e].need,callback:function(a){t.$set(t.inputs[e],"need",a)},expression:"inputs[materialName].need"}}),a("mdui-number-input",{staticClass:"block mdui-m-b-1",attrs:{placeholder:"已有"},model:{value:t.inputs[e].have,callback:function(a){t.$set(t.inputs[e],"have",a)},expression:"inputs[materialName].have"}}),a("div",{staticClass:"gap block"},[a("span",{staticClass:"gap-num no-sl"},[t._v(t._s(t.gaps[e][0])),t.gaps[e][1]>0?a("small",[t._v("("+t._s(t.gaps[e][1])+")")]):t._e()])])],1)])])])})),0)]):t._l(t.rareNum,(function(e){return a("div",{directives:[{name:"show",rawName:"v-show",value:t.showMaterials[t.rareNum+1-e].length>0,expression:"showMaterials[rareNum + 1 - i].length > 0"}],key:"materials-"+e,staticClass:"mdui-col-xs-12",attrs:{id:"material-normal"}},[a("div",{staticClass:"mdui-typo rare-title"},[a("h2",[t._v("稀有度 "+t._s(t.rareNum+1-e))])]),a("div",{staticClass:"material-group-wrap"},t._l(t.materials[t.rareNum+1-e],(function(i){return a("div",{directives:[{name:"show",rawName:"v-show",value:t.showMaterials[t.rareNum+1-e].includes(i.name),expression:"showMaterials[rareNum + 1 - i].includes(material.name)"}],key:i.name,class:"mdui-card"+(t.$root.smallScreen?"":" mdui-m-r-2")+" mdui-m-b-2 material"+(t.setting.translucentDisplay&&t.hasInput&&0==t.gaps[i.name][0]?" opacity-5":"")},[a("div",{class:"card-triangle "+t.color[t.rareNum+1-e]}),a("div",{staticClass:"mdui-card-header",attrs:{name:i.name,"mdui-tooltip":!t.$root.isMobile()&&"{content:'合成需要："+t.madeofTooltips[i.name]+"',position:'top'}"}},[a("div",{staticClass:"mdui-card-header-avatar mdui-valign no-sl",attrs:{t:t.rareNum+1-e}},[a("img",{staticClass:"no-pe",attrs:{src:"/assets/img/material/"+i.img}})]),a("div",{class:"mdui-card-header-title no-sl"+(t.inputs[i.name].need>0?" mdui-text-color-pink-accent":"")},[t._v("\n                            "+t._s(i.name)+"\n                            "),t.synthesizable[i.name]?a("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense small-btn mdui-text-color-pink-accent mdui-p-x-1",on:{click:function(e){return t.synthesize(i.name)}}},[t._v("合成")]):t._e(),t.$root.isMobile()?a("p",{staticClass:"mdui-m-y-0 mdui-text-color-black-disabled",staticStyle:{"font-size":"12px","font-weight":"400"}},[t._v(t._s(t.madeofTooltips[i.name]))]):t._e()]),a("div",{class:!t.$root.isMobile()&&"mdui-m-t-1"},[a("mdui-number-input",{staticClass:"mdui-m-r-1",model:{value:t.inputs[i.name].need,callback:function(e){t.$set(t.inputs[i.name],"need",e)},expression:"inputs[material.name].need"}},[t._v("需求")]),a("mdui-number-input",{staticClass:"mdui-m-r-1",model:{value:t.inputs[i.name].have,callback:function(e){t.$set(t.inputs[i.name],"have",e)},expression:"inputs[material.name].have"}},[t._v("已有")]),a("div",{staticClass:"gap"},[a("label",{staticClass:"mdui-textfield-label no-sl"},[t._v("仍需")]),a("span",{staticClass:"gap-num no-sl"},[t._v(t._s(t.gaps[i.name][0])),t.gaps[i.name][1]>0?a("small",[t._v("("+t._s(t.gaps[i.name][1])+")")]):t._e()])]),t.l.size(i.source)>0?a("ul",{staticClass:"source-list no-sl pointer",attrs:{length:t.l.size(i.source)},on:{click:function(e){return t.showDropDetail(i)}}},t._l(i.source,(function(e,n){return a("li",{key:i.name+"-"+n,staticClass:"source"},[a("span",{staticClass:"code"},[t._v(t._s(n))]),t.setting.showDropProbability&&t.plannerInited&&t.showDPFlag?a("span",{class:"probability with-show "+t.color[e]},[a("span",{class:"show-0"+(t.dropTable[n]?" opacity-0":"")},[t._v("  N/A  ")]),t.dropTable[n]?[a("span",{staticClass:"show-1"},[t._v(t._s(t.l.padEnd(t.l.round(100*t.dropTable[n][i.name],1).toPrecision(3),5," "))+"%")]),a("span",{staticClass:"show-2"},[t._v(t._s(t.dropInfo.expectAP[i.name][n].toPrecision(3))+"⚡")])]:t._e()],2):a("span",{class:"probability "+t.color[e]},[t._v(t._s(e))])])})),0):t._e()],1)])])})),0)])}))],2),a("div",{staticClass:"mdui-dialog mdui-card",attrs:{id:"preset-setting"}},[t.sp?[a("div",{staticClass:"mdui-card-header mdui-p-b-0"},[a("img",{staticClass:"mdui-card-header-avatar no-pe",attrs:{src:!!t.addition[t.selectedPresetName]&&t.$root.avatar(t.addition[t.selectedPresetName])}}),a("div",{staticClass:"mdui-card-header-title"},[t._v(t._s(t.selectedPresetName))])]),a("div",{staticClass:"mdui-card-content preset-list mdui-p-x-3"},[a("div",{staticClass:"elite-cb-list"},t._l(t.sp.elites,(function(e,i){return a("mdui-checkbox",{key:"elite-"+(i+1),model:{value:t.pSetting.elites[i],callback:function(e){t.$set(t.pSetting.elites,i,e)},expression:"pSetting.elites[i]"}},[t._v("精"+t._s(i+1))])})),1),t.sp.skills.normal.length>=2?a("div",{staticClass:"skill-normal"},[a("mdui-checkbox",{staticClass:"skill-cb",model:{value:t.pSetting.skills.normal[0],callback:function(e){t.$set(t.pSetting.skills.normal,0,e)},expression:"pSetting.skills.normal[0]"}},[t._v("技能")]),a("div",{staticClass:"inline-block"},[a("mdui-select-num",{attrs:{options:t.l.range(1,t.sp.skills.normal.length+1)},on:{change:function(e){t.$root.mutation(),t.pSetting.skills.normal[1]>=t.pSetting.skills.normal[2]&&(t.pSetting.skills.normal[2]=t.pSetting.skills.normal[1]+1)}},model:{value:t.pSetting.skills.normal[1],callback:function(e){t.$set(t.pSetting.skills.normal,1,e)},expression:"pSetting.skills.normal[1]"}}),a("i",{staticClass:"mdui-icon material-icons mdui-m-x-2"},[t._v("arrow_forward")]),a("span",{key:"sn-s-"+(t.pSetting.skills.normal[1]+1)},[a("mdui-select-num",{attrs:{options:t.l.range(t.pSetting.skills.normal[1]+1,t.sp.skills.normal.length+2)},model:{value:t.pSetting.skills.normal[2],callback:function(e){t.$set(t.pSetting.skills.normal,2,e)},expression:"pSetting.skills.normal[2]"}})],1)],1)],1):t._e(),t.sp.skills.elite.length>0?t._l(t.sp.skills.elite,(function(e,i){return a("div",{key:"se-"+e.name,staticClass:"skill-elite"},[a("mdui-checkbox",{staticClass:"skill-cb",model:{value:t.pSetting.skills.elite[i][0],callback:function(e){t.$set(t.pSetting.skills.elite[i],0,e)},expression:"pSetting.skills.elite[i][0]"}},[t._v(t._s(e.name))]),a("div",{staticClass:"inline-block"},[a("mdui-select-num",{attrs:{options:t.l.range(t.sp.skills.normal.length+1,t.sp.skills.normal.length+e.need.length+1)},on:{change:function(e){t.$root.mutation(),t.pSetting.skills.elite[i][1]>=t.pSetting.skills.elite[i][2]&&(t.pSetting.skills.elite[i][2]=t.pSetting.skills.elite[i][1]+1)}},model:{value:t.pSetting.skills.elite[i][1],callback:function(e){t.$set(t.pSetting.skills.elite[i],1,e)},expression:"pSetting.skills.elite[i][1]"}}),a("i",{staticClass:"mdui-icon material-icons mdui-m-x-2"},[t._v("arrow_forward")]),a("span",{key:"se-s-"+(t.pSetting.skills.elite[i][1]+1)},[a("mdui-select-num",{attrs:{options:t.l.range(t.pSetting.skills.elite[i][1]+1,t.sp.skills.normal.length+e.need.length+2)},model:{value:t.pSetting.skills.elite[i][2],callback:function(e){t.$set(t.pSetting.skills.elite[i],2,e)},expression:"pSetting.skills.elite[i][2]"}})],1)],1)],1)})):t._e()],2)]:t._e(),a("div",{staticClass:"mdui-dialog-actions"},[a("button",{staticClass:"mdui-btn mdui-ripple",attrs:{"mdui-dialog-cancel":""}},[t._v("取消")]),"add"==this.pSetting.state?a("button",{staticClass:"mdui-btn mdui-ripple mdui-color-pink",attrs:{"mdui-dialog-confirm":""},on:{click:t.addPreset}},[t._v("添加")]):t._e(),"edit"==this.pSetting.state?a("button",{staticClass:"mdui-btn mdui-ripple mdui-color-teal",attrs:{"mdui-dialog-confirm":""},on:{click:t.editPreset}},[t._v("修改")]):t._e()])],2),a("div",{staticClass:"mdui-dialog mdui-typo",attrs:{id:"planner"}},[t.plan?[a("div",{staticClass:"mdui-dialog-title"},[t._v("\n                结果仅供参考\n                "),a("p",{staticClass:"mdui-m-b-0 mdui-m-t-2",staticStyle:{"font-size":"15px"}},[t._v("\n                    预计消耗理智："),a("code",[t._v(t._s(t.plan.cost))]),a("br"),a("span",{staticClass:"mdui-text-color-blue-900"},[t._v("关卡")]),t._v(" × "),a("span",{staticClass:"mdui-text-color-pink-accent"},[t._v("次数")]),t._v("  ("),a("span",{staticClass:"mdui-text-color-yellow-900"},[t._v("理智")]),t._v(")  "),a("span",{staticClass:"mdui-text-color-black blod-text"},[t._v("需求产物")]),t._v("  "),a("span",{staticStyle:{color:"rgba(0,0,0,.7)"}},[t._v("副产物")])])]),a("div",{staticClass:"mdui-dialog-content"},[t._l(t.plan.stages,(function(e){return a("div",{key:e.code,staticClass:"stage"},[a("h5",{staticClass:"h-ul"},[a("span",{staticClass:"mdui-text-color-blue-900"},[t._v(t._s(e.code))]),t._v(" × "),a("span",{staticClass:"mdui-text-color-pink-accent"},[t._v(t._s(e.times))]),t._v("  ("),a("span",{staticClass:"mdui-text-color-yellow-900"},[t._v(t._s(e.cost))]),t._v(")\n                    ")]),a("div",{staticClass:"num-item-list"},[t._l(e.drops,(function(i){return a("arkn-num-item",{key:e.code+"-"+i.name,attrs:{t:t.materialsTable[i.name].rare,img:t.materialsTable[i.name].img,lable:i.name,num:i.num,color:t.gaps[i.name][0]>0&&"mdui-text-color-black blod-text"}})})),a("arkn-num-item",{attrs:{t:"4",img:"G-4-1",lable:"龙门币",num:t.num10k(e.money)}}),e.cardExp>0?a("arkn-num-item",{attrs:{t:"5",img:"E-5-1",lable:"狗粮经验值",num:t.num10k(e.cardExp)}}):t._e()],2)])})),t.plan.synthesis.length>0?a("div",{staticClass:"stage"},[a("h5",{staticClass:"h-ul"},[t._v("需要合成")]),a("div",{staticClass:"num-item-list"},[t._l(t.plan.synthesis,(function(e){return a("arkn-num-item",{key:"合成-"+e.name,attrs:{t:t.materialsTable[e.name].rare,img:t.materialsTable[e.name].img,lable:e.name,num:e.num}})})),a("arkn-num-item",{attrs:{t:"4",img:"G-4-1",lable:"消耗龙门币",num:t.num10k(t.plan.synthesisCost)}})],2)]):t._e(),a("div",{staticClass:"stage"},[a("h5",{staticClass:"h-ul"},[t._v("总计获得")]),a("div",{staticClass:"num-item-list"},[a("arkn-num-item",{attrs:{t:"4",img:"G-4-1",lable:"龙门币",num:t.num10k(t.plan.money)}}),t.plan.cardExp>0?a("arkn-num-item",{attrs:{t:"5",img:"E-5-1",lable:"狗粮经验值",num:t.num10k(t.plan.cardExp)}}):t._e()],1)])],2)]:t._e(),t._m(1)],2),a("div",{staticClass:"mdui-dialog mdui-typo",attrs:{id:"drop-detail"}},[t.dropDetails?[a("div",{staticClass:"mdui-dialog-title mdui-p-b-1"},[t._v("\n                "+t._s(t.dropFocus)+"\n                "),a("p",{staticClass:"mdui-m-b-0 mdui-m-t-1",staticStyle:{"font-size":"16px"}},[t._v("关卡  期望理智⚡  $关卡性价比")])]),a("div",{staticClass:"mdui-dialog-content mdui-p-b-0"},t._l(t.dropDetails,(function(e){return a("div",{key:"dd-"+e.code,staticClass:"stage"},[a("h5",{staticClass:"h-ul"},[t._v("\n                        "+t._s(e.code)+"  "),a("code",[t._v(t._s(t.l.round(t.dropInfo.expectAP[t.dropFocus][e.code],1).toPrecision(3))+"⚡")]),t._v("  "),a("code",[t._v("$"+t._s(t.dropInfo.stageValue[e.code].toPrecision(4)))])]),a("div",{staticClass:"num-item-list"},t._l(e.drops,(function(i){return a("arkn-num-item",{key:"detail-"+e.code+"-"+i[0],attrs:{t:t.materialsTable[i[0]].rare,img:t.materialsTable[i[0]].img,lable:i[0],num:t.l.round(100*i[1],2)+"%",color:t.dropFocus==i[0]&&"mdui-text-color-black blod-text"}})})),1)])})),0)]:t._e(),t._m(2)],2)])},W=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mdui-panel-item-header"},[a("div",{staticClass:"mdui-panel-item-title"},[t._v("说明")]),a("i",{staticClass:"mdui-panel-item-arrow mdui-icon material-icons"},[t._v("keyboard_arrow_down")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mdui-dialog-actions"},[a("button",{staticClass:"mdui-btn mdui-ripple",attrs:{"mdui-dialog-cancel":""}},[t._v("关闭")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mdui-dialog-actions"},[a("button",{staticClass:"mdui-btn mdui-ripple",attrs:{"mdui-dialog-cancel":""}},[t._v("关闭")])])}],Z=(a("8e6e"),a("f559"),a("bd86")),Q=a("75fc"),U=(a("6b54"),a("456d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"num-item"},[a("div",{staticClass:"mdui-valign"},[a("arkn-item",{attrs:{t:t.calcT,img:t.img,width:t.width}}),a("div",{staticClass:"with-label"},[a("label",{class:"mdui-textfield-label "+t.calcColor},[t._v(t._s(t.lable))]),"undefined"!=typeof t.num?a("span",{class:t.calcColor},[t._v(t._s(t.num))]):a("span",{class:t.calcColor},[t._t("default")],2)])],1)])}),q=[],H=(a("c5f6"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"no-sl mdui-m-r-1 mdui-valign",attrs:{t:t.t}},[a("div",{staticClass:"mdui-valign item-img-div",style:"width:"+t.width+"px;height:"+t.width+"px"},[a("img",{staticClass:"no-pe item-img",style:"transform:scale("+t.scale+")",attrs:{src:"/assets/img/material/"+t.calcImg}})])])}),X=[],Y=(a("aef6"),{name:"arkn-item",computed:{calcImg:function(){return this.img.endsWith(".png")?this.img:"".concat(this.img,".png")},scale:function(){return this.width/180}},props:{t:[Number,String],img:String,width:{type:Number,default:48}}}),K=Y,tt=(a("747a"),Object(d["a"])(K,H,X,!1,null,"6497e090",null)),et=tt.exports,at={name:"arkn-num-item",components:{ArknItem:et},computed:{calcT:function(){if(this.t)return this.t;var t=/-(.+)-/.exec(this.img);return!!t&&t[1]},calcColor:function(){return this.color?this.color:""}},props:{t:[Number,String],img:String,lable:String,num:[Number,String],width:Number,color:[String,Boolean]}},it=at,nt=(a("b7b1"),Object(d["a"])(it,U,q,!1,null,null,null)),st=nt.exports,rt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},lt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"mdui-typo mdui-m-y-0",staticStyle:{"font-size":"14px"}},[a("li",[t._v("设置与输入会实时自动保存")]),a("li",[t._v("材料卡片的"),a("b",[t._v("仍需")]),t._v("中，小字括号中的数字表示可以合成的数量")]),a("li",[t._v("点击一次材料名字旁边的"),a("b",[t._v("合成")]),t._v("按钮可模拟全部合成（扣除原材料，增加产物）")]),a("li",[t._v("点击材料卡片右侧的掉落信息可显示相关关卡的详细掉落情况，以及关卡性价比（越高越好）")]),a("li",[a("span",{staticClass:"mdui-text-color-pink-accent"},[t._v("粉色字材料")]),t._v("代表该材料存在原始需求，而不仅仅是上位材料所需的合成材料")]),a("li",[a("b",[t._v("预设")]),t._v("用于计算干员精英化/技能升级所需材料，添加预设将会丢弃当前所有的"),a("b",[t._v("需求")]),t._v("输入，点击已添加的预设可以进行编辑；在"),a("b",[t._v("重置需求&已有")]),t._v("或"),a("b",[t._v("重置需求")]),t._v("后，预设将一并被清空")]),a("li",[a("b",[t._v("我该刷什么图")]),t._v("可以计算最优的刷图路线，仅供参考，掉落概率数据来自"),a("a",{attrs:{href:"https://penguin-stats.io/",target:"_blank"}},[t._v("企鹅物流数据统计")])])])}],ot={name:"material-readme",mounted:function(){this.$root.mutation()}},ct=ot,ut=Object(d["a"])(ct,rt,lt,!1,null,null,null),dt=ut.exports,mt=a("c7a0"),pt=a.n(mt),ht=a("27ae"),vt=a("5ec1"),ft=a.n(vt),gt=a("ebbb"),bt=a("290b"),_t=a("e292");function kt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function yt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?kt(a,!0).forEach((function(e){Object(Z["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):kt(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Ct="https://penguin-stats.io/PenguinStats/api/result/matrix?show_stage_details=true&show_item_details=true",xt=["cost","event","cardExp"],wt={elites:[!1,!1],skills:{normal:[!1,1,7],elite:[[!1,7,10],[!1,7,10],[!1,7,10]]},state:"add"};function St(t){return t<0?0:t}var $t={name:"arkn-material",components:{VueTagsInput:pt.a,MaterialReadme:dt,ArknNumItem:st},data:function(){return{l:P.a,showAll:!1,materials:P.a.cloneDeep(bt),materialsTable:P.a.transform(P.a.cloneDeep(bt),(function(t,e){return t[e.name]=e}),{}),materialsOrder:P.a.cloneDeep(_t),addition:P.a.cloneDeep(F),elite:P.a.cloneDeep(gt),inputs:{},preset:"",selectedPresetName:"",selectedPreset:!1,pSetting:P.a.cloneDeep(wt),presetDialog:!1,selected:{rare:[],presets:[]},setting:{simpleMode:!1,hideIrrelevant:!1,translucentDisplay:!0,stopSynthetiseLE3:!1,showDropProbability:!1,planIncludeEvent:!0,planCardExpFirst:!1},settingZh:{simpleMode:"简洁模式",hideIrrelevant:"隐藏无关素材",translucentDisplay:"半透明显示已满足需求的素材",stopSynthetiseLE3:'不计算<span class="mdui-text-color-blue-600">稀有度3</span>及以下材料的合成需求',showDropProbability:"显示掉落概率(%)及期望理智(⚡)"},color:{notSelected:"mdui-color-brown-300",selected:"mdui-color-grey-800",5:"mdui-color-yellow-700",4:"mdui-color-deep-purple-300",3:"mdui-color-blue-600",2:"mdui-color-lime",1:"mdui-color-grey-700","固定":"mdui-color-grey-900","小概率":"mdui-color-grey-300","中概率":"mdui-color-grey-500","大概率":"mdui-color-grey-700","罕见":"mdui-color-red-900"},penguinData:{expire:0,data:!1},plannerInited:!1,dropTable:{},plannerResult:{},plannerDialog:!1,apbDisabled:!1,showDPFlag:!0,dropDialog:!1,dropDetails:!1,dropFocus:"",dropInfo:{expectAP:{},stageValue:{}},synthesisTable:{le3:{},gt3:{}},materialConstraints:{},lastShowMaterials:[]}},watch:{setting:{handler:function(t){return localStorage.setItem("material.setting",JSON.stringify(t))},deep:!0},selected:{handler:function(t){return localStorage.setItem("material.selected",JSON.stringify(t))},deep:!0},inputs:{handler:function(t){for(var e=0,a=Object.values(t);e<a.length;e++)for(var i=a[e],n=0,s=Object.keys(i);n<s.length;n++){var r=s[n];if(["need","have"].includes(r)){var l=i[r],o=/[^0-9]/.exec(l);o&&(i[r]=(parseInt(/[0-9]*/.exec(l)[0])||0).toString())}else delete i[r]}localStorage.setItem("material.inputs",JSON.stringify(t))},deep:!0},"setting.showDropProbability":function(t){t&&this.initPlanner()}},computed:{madeofTooltips:function(){return P.a.transform(bt,(function(t,e){var a=e.name,i=e.madeof,n=[];P.a.forIn(i,(function(t,e){return n.push("".concat(e,"*").concat(t))})),t[a]=n.length>0?"".concat(n.join("、")):"无法合成"}),{})},synthesizable:function(){var t=this;return P.a.transform(bt,(function(e,a){var i=a.name,n=a.madeof;0!=P.a.size(n)?e[i]=P.a.every(n,(function(e,a){return t.inputsInt[a].have>=e})):e[i]=!1}),{})},allRare:function(){return P.a.sum(this.selected.rare)==this.rareNum},rareNum:function(){return P.a.size(this.materials)},inputsInt:function(){var t={};for(var e in this.inputs)t[e]=P.a.mapValues(this.inputs[e],(function(t){return parseInt(t)||0}));return t},gaps:function(){var t=this,e=this.inputsInt,a=P.a.mapValues(e,(function(t){return t.need})),i=P.a.mapValues(e,(function(){return 0})),n=P.a.mapValues(e,(function(){return 0}));return P.a.forInRight(this.materials,(function(i,n){var s=!0,r=!1,l=void 0;try{for(var o,c=function(){var i=o.value,s=i.name,r=i.madeof;if(a[s]=St(a[s]-e[s].have),t.setting.stopSynthetiseLE3&&n<=3)return"continue";P.a.forIn(r,(function(t,e){a[e]+=a[s]*t}))},u=i[Symbol.iterator]();!(s=(o=u.next()).done);s=!0)c()}catch(d){r=!0,l=d}finally{try{s||null==u.return||u.return()}finally{if(r)throw l}}})),P.a.forIn(this.materials,(function(e,s){var r=!0,l=!1,o=void 0;try{for(var c,u=e[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var d=c.value,m=d.name,p=d.madeof;if(!(0==P.a.size(p)||t.setting.stopSynthetiseLE3&&s<=3))while(a[m]>0&&P.a.every(p,(function(e,a){return t.inputsInt[a].have+i[a]-n[a]-e>=0})))a[m]--,i[m]++,P.a.forEach(p,(function(t,e){return n[e]+=t}))}}catch(h){l=!0,o=h}finally{try{r||null==u.return||u.return()}finally{if(l)throw o}}})),P.a.mergeWith(a,i,(function(t,e){return[t,e]}))},hasDataMaterials:function(){var t=this;return P.a.mapValues(this.materials,(function(e){var a=[],i=!0,n=!1,s=void 0;try{for(var r,l=e[Symbol.iterator]();!(i=(r=l.next()).done);i=!0){var o=r.value.name;t.inputsInt[o].need+t.inputsInt[o].have+t.gaps[o][0]+t.gaps[o][1]>0&&a.push(o)}}catch(c){n=!0,s=c}finally{try{i||null==l.return||l.return()}finally{if(n)throw s}}return a}))},showMaterials:function(){var t=this,e=P.a.mapValues(this.materials,(function(e,a){var i=[],n=!0,s=!1,r=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var c=l.value.name;(t.inputsInt[c].need>0||0==t.inputsInt[c].need&&t.selected.rare[a-1]&&(t.hasDataMaterials[a].includes(c)||!t.hasDataMaterials[a].includes(c)&&(!t.setting.hideIrrelevant||!t.hasInput)))&&i.push(c)}}catch(u){s=!0,r=u}finally{try{n||null==o.return||o.return()}finally{if(s)throw r}}return i}));return P.a.isEqual(this.lastShowMaterials,e)||(this.lastShowMaterials=P.a.cloneDeep(e),this.showDPFlag=!1,this.$nextTick((function(){return t.showDPFlag=!0}))),e},showMaterialsFlatten:function(){var t=this;return P.a.transform(this.materials,(function(e,a,i){var n=!0,s=!1,r=void 0;try{for(var l,o=a[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var c=l.value.name;(t.inputsInt[c].need>0||0==t.inputsInt[c].need&&t.selected.rare[i-1]&&(t.hasDataMaterials[i].includes(c)||!t.hasDataMaterials[i].includes(c)&&(!t.setting.hideIrrelevant||!t.hasInput)))&&e.push(c)}}catch(u){s=!0,r=u}finally{try{n||null==o.return||o.return()}finally{if(s)throw r}}}),[])},hasInput:function(){for(var t=0,e=1;e<=this.rareNum;e++)t+=this.hasDataMaterials[e].length;return t},presetItems:function(){var t=this.preset.toLowerCase().replace(/ /g,""),e=[];for(var a in this.elite){var i=this.addition[a],n=i.full,s=i.head,r=i.en,l=[a,n,s,r.toLowerCase().replace(/ /g,"")].map((function(e){return e.indexOf(t)}));P.a.every(l,(function(t){return-1===t}))||e.push({pos:P.a.min(l.filter((function(t){return t>=0}))),name:a})}return e.sort((function(t,e){return t.pos==e.pos?t.name.length-e.name.length:t.pos-e.pos})),P.a.map(e,(function(t){return{text:t.name}})).slice(0,10)},sp:function(){return 0!==this.selectedPresetName.length&&this.elite[this.selectedPresetName]},checkPSetting:function(){var t=this.pSetting,e=[].concat(Object(Q["a"])(t.elites),[t.skills.normal[0]],Object(Q["a"])(P.a.map(t.skills.elite,(function(t){return t[0]}))));return P.a.sum(e)>0},plan:function(){var t=this;if(!this.plannerInited)return!1;var e=[this.setting.planIncludeEvent?this.dropTable:P.a.omitBy(this.dropTable,(function(t){return t.event})),this.synthesisTable.gt3];this.setting.stopSynthetiseLE3||e.push(this.synthesisTable.le3);var a={optimize:"cost",opType:"min",constraints:yt({},this.materialConstraints,{},P.a.transform(this.inputsInt,(function(t,e,a){e.need>0&&(t[a]={min:e.need})}),{}),{cardExp:{min:0},init:{equal:1}}),variables:Object.assign.apply(Object,[{have:P.a.transform(this.inputsInt,(function(t,e,a){e.have>0&&(t[a]=e.have)}),{init:1})}].concat(e))};this.setting.planCardExpFirst&&(a.variables["转换-经验值"]={cardExp:-7400,cost:-30});var i=ft.a.Solve(a);if(!i.feasible)return!1;delete i.feasible,delete i.result,delete i.bounded,delete i.have;var n=P.a.mapValues(P.a.mapValues(P.a.omitBy(i,(function(t,e){return e.startsWith("合成-")||e.startsWith("转换-")})),(function(t){return t<1?1:Math.ceil(t)})),(function(e,a){var i=e*t.dropTable[a].cost,n=P.a.mapValues(P.a.omit(t.dropTable[a],xt),(function(t){return P.a.round(e*t,1)})),s=P.a.transform(n,(function(t,e,a){e>0&&t.push({name:a,num:e})}),[]);return s.sort((function(e,a){var i=t.materialsTable[a.name].rare-t.materialsTable[e.name].rare;return 0==i&&(i=a.num-e.num),i})),{times:e,cost:i,money:12*i,cardExp:P.a.round(t.dropTable[a].cardExp*e),drops:s}})),s=P.a.toPairs(n),r=P.a.transform(n,(function(t,e,a){return t.push(yt({code:a},e))}),[]);r.sort((function(t,e){return e.code.localeCompare(t.code)}));var l=0,o=P.a.transform(P.a.pickBy(i,(function(t,e){return e.startsWith("合成-")})),(function(e,a,i){var n=i.split("合成-")[1];l+=100*(t.materialsTable[n].rare-1)*a,e.push({name:n,num:P.a.round(a,1)})}),[]);return o.sort((function(e,a){var i=t.materialsTable[a.name].rare-t.materialsTable[e.name].rare;return 0==i&&(i=a.num-e.num),i})),l=P.a.round(l),{cost:P.a.sumBy(s,(function(t){return t[1].cost})),stages:r,synthesis:o,synthesisCost:l,money:P.a.sumBy(s,(function(t){return t[1].money}))-l,cardExp:P.a.sumBy(s,(function(t){return t[1].cardExp}))}}},methods:{num10k:function(t){return t>1e5?"".concat(P.a.round(t/1e4,2),"w"):t},synthesize:function(t){var e=this;if(this.synthesizable[t]){var a=this.gaps[t][1],i=this.materialsTable[t].madeof;P.a.forIn(i,(function(t,i){return e.inputs[i].have=(e.inputsInt[i].have-t*a).toString()})),this.inputs[t].have=(this.inputsInt[t].have+a).toString()}},reset:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var a in e&&(t&&"have"==t||(this.selected.presets=[])),this.inputs){var i=this.inputs[a];if(t)i[t]="";else for(var n in i)i[n]=""}},addNeed:function(t){var e=this;P.a.each(t,(function(t,a){var i=parseInt(e.inputs[a].need)||0;e.inputs[a].need=(i+t).toString()}))},usePreset:function(t){var e=this;t&&(this.selected.presets=t),this.reset("need",!1);var a=!0,i=!1,n=void 0;try{for(var s,r=function(){var t=s.value,a=t.text,i=t.setting,n=i.elites,r=i.skills,l=e.elite[a];if(l.elites.forEach((function(t,a){n[a]&&e.addNeed(t)})),r.normal[0])for(var o=r.normal[1]-1;o<r.normal[2]-1;o++)e.addNeed(l.skills.normal[o]);l.skills.elite.forEach((function(t,a){var i=r.elite[a];if(i[0])for(var n=l.skills.normal.length+1,s=i[1]-n;s<i[2]-n;s++)e.addNeed(l.skills.elite[a].need[s])}))},l=this.selected.presets[Symbol.iterator]();!(a=(s=l.next()).done);a=!0)r()}catch(o){i=!0,n=o}finally{try{a||null==l.return||l.return()}finally{if(i)throw n}}localStorage.setItem("material.selected",JSON.stringify(this.selected))},showPreset:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.selectedPreset=t,this.selectedPresetName=t.tag.text,a?this.pSetting=P.a.cloneDeep(this.selected.presets[t.index].setting):(this.pSetting=P.a.cloneDeep(wt),P.a.each(this.elite[this.selectedPresetName].skills.elite,(function(t,a){var i=t.need;e.pSetting.skills.elite[a][2]-=3-i.length}))),this.$nextTick((function(){e.presetDialog.open(),e.$root.mutation()}))},addPreset:function(){this.checkPSetting?(this.selectedPreset.tag.setting=P.a.cloneDeep(this.pSetting),this.selectedPreset.tag.setting.state="edit",this.selectedPreset.addTag()):this.$root.snackbar("什么也没勾选呢……")},editPreset:function(){this.checkPSetting?(this.selected.presets[this.selectedPreset.index].setting=P.a.cloneDeep(this.pSetting),this.usePreset()):this.$root.snackbar("什么也没勾选呢……")},saveData:function(){var t=this.$root.Mdui,e={inputs:this.inputs,presets:this.selected.presets},a=ht["Base64"].encode(JSON.stringify(e));t.prompt("请保存文本框中的所有内容","导出备份",(function(){t.JQ(".mdui-dialog input")[0].select(),document.execCommand("copy"),t.snackbar("复制成功")}),(function(){}),{history:!1,defaultValue:a,cancelText:"关闭",confirmText:"复制到剪贴板"})},restoreData:function(){var t=this,e=this.$root.Mdui;e.prompt("请在文本框中粘贴上次保存的内容","导入备份",(function(a){if(0!=a.length)try{var i=JSON.parse(ht["Base64"].decode(a)),n=i.inputs,s=i.presets;t.inputs=n,t.selected.presets=s,e.snackbar("导入成功")}catch(r){e.snackbar("导入失败，输入有误")}}),(function(){}),{history:!1,cancelText:"取消",confirmText:"导入"})},initPlanner:function(){var t=Object(M["a"])(regeneratorRuntime.mark((function t(){var e,a,i,n,s,r,l,o,c,u,d,m,p,h,v,f,g,b,_,k,y,C,x,w,S,$,E,O,D,T=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.plannerInited){t.next=2;break}return t.abrupt("return");case 2:if(this.penguinData.data&&!(this.penguinData.expire<P.a.now())){t.next=20;break}return e=this.$root.snackbar({message:"正在从企鹅物流加载/更新数据",timeout:0,closeOnOutsideClick:!1}),t.next=6,L.get(Ct,!0).catch((function(){return!1}));case 6:if(a=t.sent,e.close(),!a){t.next=14;break}this.penguinData.data=a,this.penguinData.expire=P.a.now()+2592e5,localStorage.setItem("material.penguinData",JSON.stringify(this.penguinData)),t.next=20;break;case 14:if(!this.penguinData.data){t.next=18;break}this.$root.snackbar("数据更新失败，使用旧数据进行计算"),t.next=20;break;case 18:return this.$root.snackbar("数据加载失败，请检查网络连接"),t.abrupt("return");case 20:i=this.dropInfo.expectAP,n=!0,s=!1,r=void 0,t.prev=24,l=bt[Symbol.iterator]();case 26:if(n=(o=l.next()).done){t.next=38;break}if(c=o.value,u=c.name,d=c.madeof,m=c.rare,i[u]={},this.materialConstraints[u]={min:0},0!=P.a.size(d)){t.next=32;break}return t.abrupt("continue",35);case 32:p={},p[u]=1,this.synthesisTable[m<=3?"le3":"gt3"]["合成-".concat(u)]=yt({},p,{},P.a.mapValues(d,(function(t){return-t})),{cost:0});case 35:n=!0,t.next=26;break;case 38:t.next=44;break;case 40:t.prev=40,t.t0=t["catch"](24),s=!0,r=t.t0;case 44:t.prev=44,t.prev=45,n||null==l.return||l.return();case 47:if(t.prev=47,!s){t.next=50;break}throw r;case 50:return t.finish(47);case 51:return t.finish(44);case 52:h={"基础作战记录":200,"初级作战记录":400,"中级作战记录":1e3,"高级作战记录":2e3},v=!0,f=!1,g=void 0,t.prev=56,b=this.penguinData.data.matrix[Symbol.iterator]();case 58:if(v=(_=b.next()).done){t.next=68;break}if(k=_.value,y=k.item,C=y.name,x=y.itemType,w=k.stage,S=w.apCost,$=w.code,E=w.stageType,O=k.quantity,D=k.times,C in this.materialConstraints||"CARD_EXP"===x){t.next=63;break}return t.abrupt("continue",65);case 63:this.dropTable[$]||(this.dropTable[$]={cost:S,event:"ACTIVITY"===E,cardExp:0}),"CARD_EXP"===x?this.dropTable[$].cardExp+=h[C]*O/D:(this.dropTable[$][C]=O/D,i[C][$]=S/this.dropTable[$][C]);case 65:v=!0,t.next=58;break;case 68:t.next=74;break;case 70:t.prev=70,t.t1=t["catch"](56),f=!0,g=t.t1;case 74:t.prev=74,t.prev=75,v||null==b.return||b.return();case 77:if(t.prev=77,!f){t.next=80;break}throw g;case 80:return t.finish(77);case 81:return t.finish(74);case 82:P.a.forEach(i,(function(t){return t.value=P.a.min(P.a.values(t))||1/0})),P.a.forIn(this.materials,(function(t){var e=!0,a=!1,n=void 0;try{for(var s,r=t[Symbol.iterator]();!(e=(s=r.next()).done);e=!0){var l=s.value,o=l.name,c=l.madeof;0!=P.a.size(c)&&(i[o].value=Math.min(i[o].value,P.a.sum(P.a.map(c,(function(t,e){return t*i[e].value})))))}}catch(u){a=!0,n=u}finally{try{e||null==r.return||r.return()}finally{if(a)throw n}}})),P.a.forEach(this.dropTable,(function(t,e){T.dropInfo.stageValue[e]=P.a.sum(P.a.map(P.a.omit(t,xt),(function(t,e){return i[e].value*t})))/t.cost})),this.plannerInited=!0;case 86:case"end":return t.stop()}}),t,this,[[24,40,44,52],[45,,47,51],[56,70,74,82],[75,,77,81]])})));function e(){return t.apply(this,arguments)}return e}(),showPlan:function(){var t=this,e=this.$root.Mdui;0===this.plan.cost?e.alert("根本不需要计算啦~",(function(){}),{confirmText:"好吧"}):this.$nextTick((function(){return t.plannerDialog.open()}))},resetPenguinData:function(){localStorage.removeItem("material.penguinData"),window.location.reload()},showDropDetail:function(){var t=Object(M["a"])(regeneratorRuntime.mark((function t(e){var a,i,n,s,r,l=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.name,i=e.source,t.next=3,this.initPlanner();case 3:for(n in this.dropDetails=[],this.dropFocus=a,i)s=this.dropTable[n],r=P.a.toPairs(P.a.omit(s,xt)).sort((function(t,e){var a=l.materialsTable[e[0]].rare-l.materialsTable[t[0]].rare;return 0!=a?a:e[1]-t[1]})),this.dropDetails.push({code:n,cost:s.cost,drops:r});this.$nextTick((function(){return l.dropDialog.open()}));case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},created:function(){var t=!0,e=!1,a=void 0;try{for(var i,n=this.materials[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var s=i.value.name;this.$set(this.inputs,s,{need:"",have:""})}}catch(d){e=!0,a=d}finally{try{t||null==n.return||n.return()}finally{if(e)throw a}}for(var r in this.materials=P.a.groupBy(this.materials,(function(t){return t.rare})),this.selected.rare=P.a.concat([!1],P.a.fill(Array(this.rareNum-1),!0)),localStorage)if(r.startsWith("material.")){var l=r.split(".")[1];this[l]=Object.assign({},this[l],JSON.parse(localStorage.getItem(r)))}for(var o in this.inputs){var c=this.inputs[o];for(var u in c)0==c[u]&&(c[u]="")}},mounted:function(){var t=this;window.mutation=this.$root.mutation,this.presetDialog=new this.$root.Mdui.Dialog("#preset-setting",{history:!1}),this.$root.Mdui.JQ("#preset-setting")[0].addEventListener("closed.mdui.dialog",(function(){return t.selectedPresetName=""})),this.plannerDialog=new this.$root.Mdui.Dialog("#planner",{history:!1}),this.dropDialog=new this.$root.Mdui.Dialog("#drop-detail",{history:!1})}},Pt=$t,Et=(a("1d8e"),Object(d["a"])(Pt,G,W,!1,null,null,null)),Ot=Et.exports,Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"arkn-level"}},[a("div",{staticClass:"mdui-row"},[a("div",{staticClass:"mdui-col-md-5"},[a("table",{staticClass:"mdui-table tag-table"},[a("tbody",[a("tr",[t._m(0),a("td",{staticClass:"mdui-valign"},[a("div",{staticClass:"with-label mdui-m-r-3"},[a("label",{staticClass:"mdui-textfield-label"},[t._v("星级")]),a("mdui-select-num",{attrs:{options:t.l.range(6,0)},on:{change:t.updateSelect},model:{value:t.inputs.star,callback:function(e){t.$set(t.inputs,"star",e)},expression:"inputs.star"}})],1),t._m(1),t._m(2)])]),a("tr",[t._m(3),a("td",{staticClass:"mdui-valign"},[a("div",{staticClass:"with-label mdui-m-r-3"},[a("label",{staticClass:"mdui-textfield-label"},[t._v("精英化")]),a("mdui-select-num",{staticClass:"select-need-update",attrs:{options:t.l.range(0,t.maxElite[t.inputs.star-1]+1)},on:{change:t.updateSelect},model:{value:t.inputs.current.elite,callback:function(e){t.$set(t.inputs.current,"elite",e)},expression:"inputs.current.elite"}})],1),a("div",{staticClass:"mdui-m-r-2 input-with-button"},[a("mdui-number-input",{model:{value:t.inputs.current.level,callback:function(e){t.$set(t.inputs.current,"level",t._n(e))},expression:"inputs.current.level"}},[t._v("等级")]),a("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense small-btn mdui-text-color-pink-accent mdui-p-x-1",on:{click:function(e){t.inputs.current.level=999}}},[t._v("Max")])],1),a("mdui-number-input",{staticStyle:{width:"80px"},model:{value:t.inputs.current.exp,callback:function(e){t.$set(t.inputs.current,"exp",t._n(e))},expression:"inputs.current.exp"}},[t._v("经验")])],1)]),a("tr",[t._m(4),a("td",{staticClass:"mdui-valign"},[a("div",{staticClass:"with-label mdui-m-r-3"},[a("label",{staticClass:"mdui-textfield-label"},[t._v("精英化")]),a("mdui-select-num",{staticClass:"select-need-update",attrs:{options:t.l.range(t.inputs.current.elite,t.maxElite[t.inputs.star-1]+1)},on:{change:t.updateSelect},model:{value:t.inputs.target.elite,callback:function(e){t.$set(t.inputs.target,"elite",e)},expression:"inputs.target.elite"}})],1),a("div",{staticClass:"input-with-button"},[a("mdui-number-input",{model:{value:t.inputs.target.level,callback:function(e){t.$set(t.inputs.target,"level",t._n(e))},expression:"inputs.target.level"}},[t._v("等级")]),a("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense small-btn mdui-text-color-pink-accent mdui-p-x-1",on:{click:function(e){t.inputs.target.level=999}}},[t._v("Max")])],1)])]),a("tr",[t._m(5),a("td",{staticClass:"mdui-valign"},[t._l(t.l.range(5,1),(function(e){return a("div",{key:"have-"+e,staticClass:"mdui-m-r-2 mdui-m-b-1 mdui-valign"},[a("arkn-item",{attrs:{t:e,img:"E-"+e+"-1"}}),a("mdui-number-input",{staticClass:"exp-input",model:{value:t.inputs.have[e],callback:function(a){t.$set(t.inputs.have,e,t._n(a))},expression:"inputs.have[i]"}},[t._v(t._s(t.expZh[e-2]))])],1)})),a("div",{staticClass:"mdui-m-r-2 mdui-m-b-1 mdui-valign"},[a("arkn-item",{attrs:{t:"4",img:"G-4-1"}}),a("mdui-number-input",{staticClass:"exp-input",staticStyle:{width:"80px"},model:{value:t.inputs.money,callback:function(e){t.$set(t.inputs,"money",t._n(e))},expression:"inputs.money"}},[t._v("龙门币")])],1)],2)]),a("tr",[a("td",{attrs:{width:"1"}},[a("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-red tag-btn",on:{click:t.reset}},[t._v("重置")])])])])])]),a("div",{staticClass:"mdui-col-md-7 mdui-p-x-2 mdui-typo"},[a("h2",{staticClass:"mdui-hidden-sm-down mdui-m-t-0"},[t._v("至少需要")]),a("h2",{staticClass:"mdui-hidden-md-up"},[t._v("总需求")]),a("div",{staticClass:"num-item-list"},[a("arkn-num-item",{attrs:{t:"5",img:"EO-4-1",lable:"经验值",num:t.result.exp}}),a("arkn-num-item",{staticClass:"mdui-m-r-0",attrs:{t:"4",img:"G-4-1",lable:"龙门币(总共)",num:t.result.cost}}),t.inputs.money?a("arkn-num-item",{attrs:{t:"4",img:"G-4-1",lable:"龙门币(仍需)",num:t.ge0(t.result.cost-t.inputs.money)}}):t._e()],1),a("h2",[t._v("物资筹备")]),a("h3",{staticClass:"mdui-m-t-0"},[t._v("LS-5 "),a("small",[t._v("× "+t._s(t.result.ls5))])]),a("div",{staticClass:"num-item-list"},[a("arkn-num-item",{attrs:{t:"0",img:"AP",lable:"理智",num:30*t.result.ls5}}),t._l([5,4,3],(function(e){return a("arkn-num-item",{key:"ls5-"+e,attrs:{t:e,img:"E-"+e+"-1",lable:t.expZh[e-2],num:t.result.ls5*t.LS5.drop[e]}})})),a("arkn-num-item",{attrs:{t:"4",img:"G-4-1",lable:"龙门币",num:t.result.ls5*t.LS5.money}})],2),a("h3",[t._v("CE-5 "),a("small",[t._v("× "+t._s(t.result.ce5))])]),a("div",{staticClass:"num-item-list"},[a("arkn-num-item",{attrs:{t:"0",img:"AP",lable:"理智",num:30*t.result.ce5}}),a("arkn-num-item",{attrs:{t:"4",img:"G-4-1",lable:"龙门币",num:t.result.ce5*t.CE5.money}})],1),t._m(6),a("div",{staticClass:"num-item-list"},t._l([5,4,3,2],(function(e){return a("arkn-num-item",{key:"num-item-"+e,attrs:{t:e,img:"E-"+e+"-1",lable:t.expZh[e-2],num:t.result.use[e]+" / "+t.result.have[e]}})})),1)])])])},Tt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{attrs:{width:"1"}},[a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v("通用")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"with-label mdui-m-r-3"},[a("label",{staticClass:"mdui-textfield-label"},[t._v("经验本")]),a("span",[t._v("LS-5")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"with-label"},[a("label",{staticClass:"mdui-textfield-label"},[t._v("金币本")]),a("span",[t._v("CE-5")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{attrs:{width:"1"}},[a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v("当前")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{attrs:{width:"1"}},[a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v("目标")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{attrs:{width:"1"}},[a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v("已有")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h2",[t._v("预计消耗 "),a("small",[t._v("需求 / 共有")])])}],It=a("9a9a"),Nt={5:2e3,4:1e3,3:400,2:200},jt={exp:7400,drop:{5:3,4:1,3:1,2:0},money:360},Mt={money:7500},At={star:6,current:{elite:0,level:1,exp:0},target:{elite:0,level:1},have:{5:0,4:0,3:0,2:0},money:0};function Lt(t){return Math.max(t,0)}var Ft={name:"arkn-level",components:{ArknItem:et,ArknNumItem:st},data:function(){return{l:P.a,inputs:P.a.cloneDeep(At),expZh:["基础","初级","中级","高级"],maxElite:P.a.map(It["c"],(function(t){return t.length})),maxLevel:It["d"],LS5:jt,CE5:Mt}},watch:{inputs:{handler:function(t){for(var e=t.star,a=t.current,i=0,n=["current","target"];i<n.length;i++){var s=n[i],r="".concat(s,".level"),l=P.a.get(t,r);if(""!==l){var o=It["d"][e-1][t[s].elite];l<1?P.a.set(t,r,1):l>o&&P.a.set(t,r,o)}}if(a.exp){a.exp<0&&(a.exp=0);var c=It["a"][a.elite][(a.level||1)-1]||1;a.exp>=c&&(a.exp=c-1)}P.a.each(t.have,(function(t,e,a){t&&t<0&&(a[e]=0)})),localStorage.setItem("level.inputs",JSON.stringify(t))},deep:!0}},computed:{result:function(){var t=this.inputs,e=t.star,a=t.current,i=t.target,n=t.have,s=t.money,r=It["d"][e-1],l=P.a.sum(P.a.map(n,(function(t,e){return t*Nt[e]}))),o=0,c=0,u=[],d={5:0,4:0,3:0,2:0};if(i.elite>a.elite||i.level>a.level){var m=It["a"][a.elite][a.level-1];if(m){var p=m-a.exp,h=p/m*It["b"][a.elite][a.level-1];o+=p,c+=h}for(var v=a.elite;v<=i.elite;v++,u.push(o)){v>a.elite&&(c+=It["c"][e-1][v-1]);for(var f=v==i.elite?i.level:r[v],g=v==a.elite?a.level+1:1;g<f;g++)o+=It["a"][v][g-1],c+=It["b"][v][g-1]}}var b=Lt(Math.ceil((o-l)/jt.exp));if(u.length>0){P.a.forEachRight(u,(function(t,e,a){e>0&&(a[e]-=a[e-1])}));var _=P.a.mapValues(jt.drop,(function(t,e){return n[e]+t*b})),k=!0,y=!1,C=void 0;try{for(var x,w=u[Symbol.iterator]();!(k=(x=w.next()).done);k=!0){var S=x.value;while(S>0){0==P.a.sum(Object.values(_))&&(b++,_=P.a.cloneDeep(jt.drop));for(var $=5;$>=2;$--)while(S>=Nt[$]&&_[$]>0)d[$]++,_[$]--,S-=Nt[$];for(var E=2;E<=5;E++)while(S>0&&_[E]>0)d[E]++,_[E]--,S-=Nt[E]}}}catch(D){y=!0,C=D}finally{try{k||null==w.return||w.return()}finally{if(y)throw C}}}var O=Lt(Math.ceil((c-b*jt.money-s)/Mt.money));return{exp:o,cost:Math.ceil(c),ls5:b,ce5:O,use:d,have:P.a.mapValues(jt.drop,(function(t,e){return n[e]+t*b}))}}},methods:{ge0:Lt,updateSelect:function(){var t=this,e=this.inputs,a=e.star,i=e.current,n=e.target,s=this.maxElite[a-1];i.elite>s&&(i.elite=s),n.elite>s&&(n.elite=s),i.elite>n.elite&&(n.elite=i.elite);var r=this.$root.Mdui.JQ;this.$nextTick((function(){return r(".select-need-update").each((function(e,a){return new t.$root.Mdui.Select(a).handleUpdate()}))}))},reset:function(){var t=this;this.inputs=P.a.cloneDeep(At);var e=this.$root.Mdui.JQ;this.$nextTick((function(){return e(".select-need-update").each((function(e,a){return new t.$root.Mdui.Select(a).handleUpdate()}))}))}},created:function(){var t=localStorage.getItem("level.inputs");t&&(this.inputs=JSON.parse(t))}},zt=Ft,Jt=(a("8dd5"),Object(d["a"])(zt,Dt,Tt,!1,null,null,null)),Bt=Jt.exports,Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"arkn-base"}},[a("div",{class:!!t.$root.smallScreen&&"mdui-drawer mdui-drawer-right mdui-drawer-close",attrs:{id:"drawer"}},[a("div",{class:"mdui-row "+(t.noneSelect?"none-select":"")},t._l(t.tagDisplay,(function(e,i){return a("div",{key:i,staticClass:"mdui-col-xs-12 tag-group-outside"},t._l(e,(function(e){return a("div",{key:e,staticClass:"tag-group"},[a("label",{staticClass:"mdui-textfield-label",style:{color:!!t.color[e]&&"var(--"+t.color[e]+")"}},[t._v(t._s(e))]),t._l(t.tag[e],(function(i){return a("tag-button",{key:i,attrs:{notSelectedColor:(t.color[e]||t.color.selected)+" opacity-5",selectedColor:t.color[e]||t.color.selected,canChange:!1},on:{click:function(a){return t.toggleTag(e,i)}},model:{value:t.selected[e][i],callback:function(a){t.$set(t.selected[e],i,a)},expression:"selected[tagType][tagName]"}},[t._v(t._s(i))])}))],2)})),0)})),0),a("div",{staticClass:"mdui-row mdui-m-t-2"},[a("div",{staticClass:"mdui-col-xs-12",staticStyle:{"white-space":"normal"}},[a("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-red tag-btn mdui-m-r-2",on:{click:t.reset}},[t._v("重置")]),t._l(t.settingZh,(function(e,i){return a("mdui-switch",{key:i,staticClass:"mdui-m-r-2",model:{value:t.setting[i],callback:function(e){t.$set(t.setting,i,e)},expression:"setting[en]"}},[t._v(t._s(e))])}))],2)]),a("div",{staticClass:"mdui-row"},[a("div",{staticClass:"mdui-col-xs-12 mdui-textfield mdui-textfield-floating-label mdui-textfield-has-clear",attrs:{id:"name-filter"}},[a("label",{staticClass:"mdui-textfield-label"},[t._v("搜索（干员中英文名/拼音/拼音首字母）")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.nameFilter,expression:"nameFilter",modifiers:{trim:!0}}],staticClass:"mdui-textfield-input",attrs:{type:"text"},domProps:{value:t.nameFilter},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.nameFilter=""},input:function(e){e.target.composing||(t.nameFilter=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("button",{staticClass:"mdui-btn mdui-btn-icon mdui-ripple mdui-btn-dense mdui-textfield-floating-label-clear",on:{click:t.clearNameFilter}},[a("i",{staticClass:"mdui-icon material-icons "},[t._v("close")])])])])]),a("div",{class:"mdui-row "+(t.$root.smallScreen?"":"mdui-m-t-4")},[a("div",{staticClass:"mdui-col-xs-12"},[a("div",{staticClass:"mdui-table-fluid"},[a("table",{staticClass:"mdui-table",attrs:{id:"skill-table"}},[t._m(0),a("tbody",[t._l(t.displayWithNameFilter,(function(e,i){return t._l(e.skills,(function(n,s){return a("tr",{key:i+"-"+s},[0===s?a("td",{staticClass:"mdui-hidden-xs-down",attrs:{rowspan:e.skills.length,width:"1"}},[a("img",{staticClass:"mdui-card-header-avatar",attrs:{src:!!t.addition[e.name]&&t.$root.avatar(t.addition[e.name])}})]):a("td",{staticClass:"hidden"}),0===s?[a("td",{staticClass:"mdui-hidden-xs-down no-wrap",attrs:{rowspan:e.skills.length,width:"1"}},[t._v(t._s(e.name))]),a("td",{staticClass:"mdui-text-center mdui-hidden-sm-up no-wrap",attrs:{rowspan:e.skills.length}},[t._v(t._s(e.name))])]:a("td",{staticClass:"hidden"}),a("td",{staticClass:"mdui-text-center no-wrap"},[t._v(t._s(n.unlock))]),a("td",{staticClass:"mdui-text-center mdui-hidden-sm-down no-wrap"},[t._v(t._s(n.building))]),a("td",{staticClass:"mdui-text-center no-wrap"},[a("span",{class:"skill-card "+t.color[n.building]},[t._v(t._s(n.name))])]),a("td",{class:!!t.$root.smallScreen&&"no-wrap",domProps:{innerHTML:t._s(n.description)}})],2)}))}))],2)])])])]),t.$root.smallScreen?a("button",{staticClass:"mdui-fab mdui-fab-fixed mdui-fab-mini mdui-color-pink-accent mdui-ripple",on:{click:function(e){!t.drawer&&(t.drawer=new t.$root.Mdui.Drawer("#drawer")),t.drawer.toggle()}}},[a("i",{staticClass:"mdui-icon material-icons"},[t._v("sort")])]):a("scroll-to-top")],1)},Rt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"mdui-text-center mdui-hidden-xs-down",attrs:{colspan:"2"}},[t._v("干员")]),a("th",{staticClass:"mdui-text-center mdui-hidden-sm-up"},[t._v("干员")]),a("th",{staticClass:"mdui-text-center"},[t._v("解锁")]),a("th",{staticClass:"mdui-text-center mdui-hidden-sm-down"},[t._v("设施")]),a("th",{staticClass:"mdui-text-center"},[t._v("技能")]),a("th",[t._v("效果（筛选时将按效果由高到低排序）")])])])}],Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"mdui-fab mdui-fab-fixed mdui-color-pink-accent mdui-ripple scroll-to-top",class:t.top>1e3?"":"mdui-fab-hide",on:{click:t.scrollTop}},[a("i",{staticClass:"mdui-icon material-icons"},[t._v("vertical_align_top")])])},Wt=[],Zt={name:"scroll-to-top",data:function(){return{top:0}},methods:{scrollTop:function(){window.scroll(0,0)},handleScroll:function(){this.top=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop}},mounted:function(){window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)}},Qt=Zt,Ut=(a("4a30"),Object(d["a"])(Qt,Gt,Wt,!1,null,"4d044b8b",null)),qt=Ut.exports,Ht=a("ebcd");function Xt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function Yt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Xt(a,!0).forEach((function(e){Object(Z["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Xt(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Kt={notSelected:"mdui-color-brown-300",selected:"mdui-color-grey-900","制造站":"mdui-color-amber-400","贸易站":"mdui-color-light-blue-700","发电站":"mdui-color-green-600","控制中枢":"mdui-color-green-900","宿舍":"mdui-color-cyan-300","会客室":"mdui-color-orange-900","加工站":"mdui-color-lime-400","训练室":"mdui-color-red-900","人力办公室":"mdui-color-grey-700"},te=[["基建设施"],["制造站","贸易站","控制中枢","宿舍","会客室","加工站","训练室"]],ee=function(t){return P.a.transform(t,(function(t,e){var a=e.num;P.a.each(a,(function(e,a){(!t[a]||t[a]<e)&&(t[a]=e)}))}),{})},ae={name:"arkn-base",components:{ScrollToTop:qt},data:function(){return Yt({member:P.a.transform(P.a.cloneDeep(z),(function(t,e){t[e.name]=e,delete t[e.name].name}),{}),addition:F,color:Kt,tagDisplay:te,setting:{mutiSelect:!1,hideIrrelevant:!1},settingZh:{mutiSelect:"多选模式",hideIrrelevant:"隐藏同一干员与筛选无关的技能"},drawer:null,selected:P.a.transform(Ht.tag,(function(t,e,a){t[a]=P.a.transform(e,(function(t,e){t[e]=!1}),{})}),{}),nameFilter:""},Ht)},watch:{setting:{handler:function(t){localStorage.setItem("base.setting",JSON.stringify(t))},deep:!0}},computed:{display:function(){var t=this,e=P.a.transform(this.selected,(function(e,a,i){var n=e.need,s=e.regGroups;P.a.each(a,(function(e,a){e&&(n.push(t.category[i][a]),s.push(t.regGroupName[i][a]))}))}),{need:[],regGroups:[]}),a=e.need,i=e.regGroups;if(P.a.isEmpty(a))return this.base;var n=P.a.map(P.a.union.apply(P.a,Object(Q["a"])(a)),(function(e){return t.base[e]}));if(this.setting.hideIrrelevant){var s=P.a.transform(this.selected,(function(t,e,a){var i=t.correlatives,n=t.buildings;P.a.each(e,(function(t,e){t&&("基建设施"===a?n.push(e):i.push("".concat(a,"-").concat(e)))}))}),{correlatives:[],buildings:[]}),r=s.correlatives,l=s.buildings;n=P.a.cloneDeep(n),P.a.each(n,(function(t){t.skills=P.a.transform(t.skills,(function(t,e){var a=!P.a.isEmpty(r)&&r.some((function(t){return e.is[t]})),i=!P.a.isEmpty(l)&&l.includes(e.building);(a||i)&&t.push(e)}),[])}))}var o=P.a.uniq(P.a.flatten(i));return n.sort((function(t,e){var a=[ee(t.skills),ee(e.skills)],i=a[0],n=a[1],s=!0,r=!1,l=void 0;try{for(var c,u=o[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var d=c.value;if(i[d]||(i[d]=0),n[d]||(n[d]=0),0!==i[d]||0!==n[d])return n[d]-i[d]}}catch(m){r=!0,l=m}finally{try{s||null==u.return||u.return()}finally{if(r)throw l}}return t.name.localeCompare(e.name)})),n},displayWithNameFilter:function(){var t=this;return this.nameFilter?P.a.filter(this.display,(function(e){var a=e.name,i=t.nameFilter.replace(/ /g,""),n=F[a],s=n.full,r=n.head,l=n.en,o=[a,s,r,l.toLowerCase().replace(/ /g,"")].map((function(t){return t.indexOf(i)}));return P.a.some(o,(function(t){return-1!==t}))})):this.display},noneSelect:function(){return P.a.every(this.selected,(function(t){return P.a.every(t,(function(t){return!t}))}))}},methods:{reset:function(){this.selected=P.a.mapValues(this.selected,(function(t){return P.a.mapValues(t,(function(){return!1}))}))},toggleTag:function(t,e){this.selected[t][e]?this.selected[t][e]=!1:(this.setting.mutiSelect||this.reset(),this.selected[t][e]=!0)},clearNameFilter:function(){this.nameFilter="",this.$root.JQ("#name-filter").removeClass("mdui-textfield-not-empty")}},created:function(){var t=localStorage.getItem("base.setting");t&&(this.setting=JSON.parse(t)),this.base.forEach((function(t){var e=t.skills;e.forEach((function(t){t.description=t.description.replace(/{{(.+?)}}/g,'<span class="mdui-text-color-blue">$1</span>').replace(/\[\[(.+?)\]\]/g,'<span class="mdui-text-color-red">$1</span>')}))}))}},ie=ae,ne=(a("190a"),Object(d["a"])(ie,Vt,Rt,!1,null,null,null)),se=ne.exports;n.a.use(v.a);var re=new v.a({routes:[{path:"/",name:"home",component:I},{path:"/hr",name:"arkn-hr",component:R},{path:"/material",name:"arkn-material",component:Ot},{path:"/level",name:"arkn-level",component:Bt},{path:"/base",name:"arkn-base",component:se}]}),le=a("8103"),oe=a.n(le),ce=a("bba4"),ue=a.n(ce),de=a("9483");Object(de["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use."),Object(s["snackbar"])("缓存完成，可以离线使用了")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh."),Object(s["snackbar"])({message:"更新已完成，请重载页面以使用新版本",buttonText:"重载",timeout:0,closeOnOutsideClick:!1,onButtonClick:function(){window.location.reload()}})},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),n.a.config.productionTip=!1;var me=a("aa90");me.keys().forEach((function(t){var e=me(t),a=oe()(ue()(t.replace(/^\.\/(.*)\.\w+$/,"$1")));n.a.component(a,e.default||e)}));var pe=r.a.JQ;re.afterEach((function(t,e){e.name&&localStorage.setItem("lastPage",t.path),pe("body").attr("tab",t.name),n.a.nextTick((function(){pe(".router-link-active:not(.router-root)").addClass("mdui-tab-active"),r.a.mutation()}))})),new n.a({router:re,render:function(t){return t(p)},data:{Mdui:r.a,JQ:pe,screenWidth:0,nm:!1,deferredPrompt:!1},methods:{mutation:function(){n.a.nextTick(r.a.mutation)},avatar:function(t){var e=t.img,a=t.full;return"/assets/img/avatar/".concat(a,".").concat(e)},snackbar:r.a.snackbar,calcSize:function(t){var e=["B","KB","MB"],a=0;while(t>1024&&a<2)t/=1024,a++;return"".concat(t.toFixed(2)," ").concat(e[a])},installPWA:function(){this.deferredPrompt&&(this.deferredPrompt.prompt(),this.deferredPrompt=!1)},isMobile:function(){return!!/iPhone|iPad|iPod|Android/i.test(navigator.platform)}},created:function(){var t=this;window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),t.deferredPrompt=e}));var e=localStorage.getItem("home.setting"),a=localStorage.getItem("lastPage");e&&(e=JSON.parse(e),e.rememberLastPage&&a&&"/"==re.currentRoute.path&&re.replace(a),"/"!=re.currentRoute.path&&localStorage.setItem("lastPage",re.currentRoute.path))},mounted:function(){var t=this;this.screenWidth=pe("body").width(),window.onresize=function(){t.screenWidth=pe("body").width()},this.isMobile()&&pe("body").attr("mobile",!0)},computed:{smallScreen:function(){return this.$root.screenWidth<=450}}}).$mount("#app")},5951:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("select",{staticClass:"mdui-select",attrs:{"mdui-select":""},domProps:{value:t.value},on:{change:function(e){t.$emit("change",parseInt(e.target.value))}}},t._l(t.options,(function(e){return a("option",{key:"opt-"+e,domProps:{value:e}},[t._v(t._s(e))])})),0)},n=[],s=(a("c5f6"),{name:"mdui-select-num",model:{event:"change"},props:{value:[Number,String],options:Array}}),r=s,l=a("2877"),o=Object(l["a"])(r,i,n,!1,null,null,null);e["default"]=o.exports},"601f":function(t,e,a){},"60bb":function(t,e){t.exports=_},6138:function(t,e,a){t.exports=a.p+"assets/img/amiya-nm.667e2801.gif"},6389:function(t,e){t.exports=VueRouter},"64a9":function(t,e,a){},"6a1a":function(t,e,a){"use strict";var i=a("a979"),n=a.n(i);n.a},"747a":function(t,e,a){"use strict";var i=a("4c50"),n=a.n(i);n.a},7612:function(t,e,a){},"77a5":function(t,e,a){"use strict";var i=a("3b81"),n=a.n(i);n.a},"8bbf":function(t,e){t.exports=Vue},"8dd5":function(t,e,a){"use strict";var i=a("46aa"),n=a.n(i);n.a},a07d:function(t,e,a){},a979:function(t,e,a){},aa90:function(t,e,a){var i={"./_MduiCheckbox.vue":"c0be","./_MduiNumberInput.vue":"2fea","./_MduiSelect.vue":"ad51","./_MduiSelectNum.vue":"5951","./_MduiSwitch.vue":"b24e","./_TagButton.vue":"be5b"};function n(t){var e=s(t);return a(e)}function s(t){if(!a.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}n.keys=function(){return Object.keys(i)},n.resolve=s,t.exports=n,n.id="aa90"},ad51:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("select",{staticClass:"mdui-select",attrs:{"mdui-select":""},domProps:{value:t.value},on:{change:function(e){return t.$emit("change",e.target.value)}}},["string"==typeof t.options[0]?t._l(t.options,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])})):t._l(t.options,(function(e){return a("option",{key:e.value,domProps:{value:e.value}},[t._v(t._s(e.text))])}))],2)},n=[],s={name:"mdui-select",model:{event:"change"},props:{value:String,options:Array}},r=s,l=a("2877"),o=Object(l["a"])(r,i,n,!1,null,null,null);e["default"]=o.exports},b24e:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"mdui-switch"},[a("input",{attrs:{type:"checkbox"},domProps:{checked:t.checked},on:{change:function(e){return t.$emit("change",e.target.checked)}}}),a("i",{staticClass:"mdui-switch-icon mdui-m-r-1"}),t.html?a("span",{domProps:{innerHTML:t._s(t.html)}}):a("span",[t._t("default")],2)])},n=[],s={name:"mdui-switch",model:{prop:"checked",event:"change"},props:{checked:Boolean,html:String}},r=s,l=a("2877"),o=Object(l["a"])(r,i,n,!1,null,null,null);e["default"]=o.exports},b7b1:function(t,e,a){"use strict";var i=a("a07d"),n=a.n(i);n.a},bd6f:function(t,e,a){t.exports=a.p+"assets/img/amiya.dbcf93e0.gif"},be5b:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{class:"mdui-btn mdui-btn-dense mdui-ripple tag-btn "+(t.checked?t.selectedColor:t.notSelectedColor)},[a("input",{staticStyle:{display:"none"},attrs:{type:"checkbox"},domProps:{checked:t.checked},on:{change:function(e){t.canChange&&t.$emit("change",e.target.checked)},click:function(e){return t.$emit("click")}}}),t._t("default")],2)},n=[],s={name:"tag-button",model:{prop:"checked",event:"change"},props:{checked:Boolean,selectedColor:String,notSelectedColor:String,canChange:{type:Boolean,default:!0}}},r=s,l=a("2877"),o=Object(l["a"])(r,i,n,!1,null,null,null);e["default"]=o.exports},c0be:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"mdui-checkbox mdui-p-l-4"},[a("input",t._b({attrs:{type:"checkbox"},domProps:{checked:t.checked},on:{change:function(e){return t.$emit("change",e.target.checked)}}},"input",t.$attrs,!1)),a("i",{staticClass:"mdui-checkbox-icon"}),a("span",{staticClass:"cb-text"},[t._t("default")],2)])},n=[],s={name:"mdui-checkbox",model:{prop:"checked",event:"change"},props:{checked:Boolean}},r=s,l=(a("236b"),a("2877")),o=Object(l["a"])(r,i,n,!1,null,"5486b3a6",null);e["default"]=o.exports},c579:function(t,e){t.exports=mdui}});